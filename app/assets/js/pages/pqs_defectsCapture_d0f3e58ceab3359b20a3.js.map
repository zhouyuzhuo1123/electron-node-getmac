{"version":3,"sources":["webpack:///assets/js/pages/pqs_defectsCapture_d0f3e58ceab3359b20a3.js","webpack:///./src/js/pages/pqs/defectsCapture.js"],"names":["webpackJsonp","644","module","exports","__webpack_require__","$","app","defectsCaptureCtrl","page","undefined","treeData","zTreeObj","hiddenNodes","init","document","off","util","setBreadcrumb","this","loadPage","loadTree","event","_this","on","e","toggle","show","F7","pickerModal","hide","closeModal","radioSelect","length","val","otherText","text","click","focus","DataTable","scrollY","ordering","searching","paging","info","columns","width","name","data","ajax","callback","settings","getJSON","xhrUrl","response","result","list","removeClass","toggleClass","chooseText","rightTableHeight","window","innerHeight","rightTableApi1","serverSide","searchDelay","key","value","search","draw","rightTableApi2","rightTableApi3","createTree","domNode","setting","title","fn","zTree","searchTree","filterFunc","node","isParent","indexOf","showNodes","getNodesByFilter","hideNodes","call"],"mappings":"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","file":"assets/js/pages/pqs_defectsCapture_d0f3e58ceab3359b20a3.js","sourcesContent":["webpackJsonp([18],{\n\n/***/ 644:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($, app) {\n\nvar defectsCaptureCtrl = {\n\tpage: undefined,\n\ttreeData: undefined,\n\tzTreeObj: undefined,\n\thiddenNodes: undefined,\n\tinit: function init() {\n\t\t$(document).off(\"keydown\");\n\t\tutil.setBreadcrumb([\"缺陷采集\"]);\n\t\tthis.loadPage();\n\t\tthis.loadTree();\n\t\tthis.event();\n\t},\n\tevent: function event() {\n\t\tvar _this = this;\n\n\t\t$(\".toggle-left-btn\", _this.page).on(\"click\", function (e) {\n\t\t\t$(\".defect-left-panel\").toggle();\n\t\t});\n\n\t\t$(\"#open-picker-defectscapture\", _this.page).on(\"click\", function (e) {\n\t\t\t$(\".masked\", _this.page).show();\n\t\t\tF7.pickerModal('.picker-defectscapture');\n\t\t});\n\n\t\t$(\".masked,.close-picker-btn\", _this.page).on(\"click\", function (e) {\n\t\t\t$(\".masked\", _this.page).hide();\n\t\t\tF7.closeModal('.picker-defectscapture');\n\n\t\t\tvar radioSelect = $('input:radio[name=\"duty-type-other\"]:checked');\n\t\t\tif (radioSelect.length > 0) {\n\n\t\t\t\t$('#duty-type-6').val(radioSelect.val());\n\n\t\t\t\tvar otherText = $('input:radio[name=\"duty-type-other\"]:checked+label').text();\n\t\t\t\t$('#duty-type-6+label').text(otherText);\n\t\t\t}\n\t\t});\n\n\t\t$(\".other-input\", _this.page).on(\"click\", function (e) {\n\t\t\t$('#defect-count-4').click();\n\t\t\t$(this).focus();\n\t\t});\n\t},\n\tloadPage: function loadPage() {\n\t\t$('table#tab1-table-left', this.page).DataTable({\n\t\t\t\"scrollY\": \"270px\",\n\t\t\t\"ordering\": false,\n\t\t\t\"searching\": false,\n\t\t\t\"paging\": false,\n\t\t\t\"info\": false,\n\t\t\t\"columns\": [{\n\t\t\t\t\"width\": \"35px\",\n\t\t\t\t\"name\": \"index\",\n\t\t\t\t\"data\": \"index\"\n\t\t\t}, {\n\t\t\t\t\"width\": \"165px\",\n\t\t\t\t\"data\": \"description\",\n\t\t\t\t\"name\": \"description\"\n\t\t\t}],\n\t\t\t\"ajax\": function ajax(data, callback, settings) {\n\t\t\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTable1.json\", function (response) {\n\t\t\t\t\tvar result = {\n\t\t\t\t\t\tdata: response.list || []\n\t\t\t\t\t};\n\t\t\t\t\tcallback(result);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t$('table#tab1-table-left tbody').on('click', 'tr', function () {\n\t\t\t$('table#tab1-table-left tr.selected').removeClass('selected');\n\t\t\t$(this).toggleClass('selected');\n\n\t\t\tvar chooseText = $('table#tab1-table-left tr.selected td:first-child').text();\n\t\t\t$('#choose-text-part').text(chooseText);\n\t\t});\n\n\t\t$('table#tab1-table-right', this.page).DataTable({\n\t\t\t\"scrollY\": \"270px\",\n\t\t\t\"ordering\": false,\n\t\t\t\"searching\": false,\n\t\t\t\"paging\": false,\n\t\t\t\"info\": false,\n\t\t\t\"columns\": [{\n\t\t\t\t\"width\": \"35px\",\n\t\t\t\t\"name\": \"index\",\n\t\t\t\t\"data\": \"index\"\n\t\t\t}, {\n\t\t\t\t\"width\": \"85px\",\n\t\t\t\t\"data\": \"description\",\n\t\t\t\t\"name\": \"description\"\n\t\t\t}],\n\t\t\t\"ajax\": function ajax(data, callback, settings) {\n\t\t\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTable2.json\", function (response) {\n\t\t\t\t\tvar result = {\n\t\t\t\t\t\tdata: response.list || []\n\t\t\t\t\t};\n\t\t\t\t\tcallback(result);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t$('table#tab1-table-right tbody').on('click', 'tr', function () {\n\t\t\t$('table#tab1-table-right tr.selected').removeClass('selected');\n\t\t\t$(this).toggleClass('selected');\n\n\t\t\tvar chooseText = $('table#tab1-table-right tr.selected td:first-child').text();\n\t\t\t$('#choose-text-direction').text(chooseText);\n\t\t});\n\n\t\tvar rightTableHeight = window.innerHeight - 502 + 'px';\n\n\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTable3.json\", function (response) {\n\t\t\tvar rightTableApi1 = $('table#right-table1', this.page).DataTable({\n\t\t\t\t\"scrollY\": rightTableHeight,\n\t\t\t\t\"ordering\": false,\n\t\t\t\t\"serverSide\": false,\n\t\t\t\t\"searching\": true,\n\t\t\t\t\"searchDelay\": 400,\n\t\t\t\t\"paging\": false,\n\t\t\t\t\"info\": false,\n\t\t\t\t\"columns\": [{\n\t\t\t\t\t\"data\": \"description\",\n\t\t\t\t\t\"name\": \"description\"\n\t\t\t\t}],\n\t\t\t\t\"data\": response.list || []\n\t\t\t});\n\t\t\t$('#right-search1').on('keyup click', function () {\n\t\t\t\tvar key = $(this)[0].value;\n\t\t\t\trightTableApi1.search(key, false, true).draw();\n\t\t\t});\n\t\t\t$('table#right-table1 tbody').on('click', 'tr', function () {\n\t\t\t\t$('table#right-table1 tr.selected').removeClass('selected');\n\t\t\t\t$(this).toggleClass('selected');\n\n\t\t\t\tvar chooseText = $('table#right-table1 tr.selected td:first-child').text();\n\t\t\t\t$('#choose-text-part').text(chooseText);\n\t\t\t});\n\t\t});\n\n\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTable4.json\", function (response) {\n\t\t\tvar rightTableApi2 = $('table#right-table2', this.page).DataTable({\n\t\t\t\t\"scrollY\": rightTableHeight,\n\t\t\t\t\"ordering\": false,\n\t\t\t\t\"serverSide\": false,\n\t\t\t\t\"searching\": true,\n\t\t\t\t\"searchDelay\": 400,\n\t\t\t\t\"paging\": false,\n\t\t\t\t\"info\": false,\n\t\t\t\t\"columns\": [{\n\t\t\t\t\t\"data\": \"description\",\n\t\t\t\t\t\"name\": \"description\"\n\t\t\t\t}],\n\t\t\t\t\"data\": response.list || []\n\t\t\t});\n\t\t\t$('#right-search2').on('keyup click', function () {\n\t\t\t\tvar key = $(this)[0].value;\n\t\t\t\trightTableApi2.search(key, false, true).draw();\n\t\t\t});\n\t\t\t$('table#right-table2 tbody').on('click', 'tr', function () {\n\t\t\t\t$('table#right-table2 tr.selected').removeClass('selected');\n\t\t\t\t$(this).toggleClass('selected');\n\n\t\t\t\tvar chooseText = $('table#right-table2 tr.selected td:first-child').text();\n\t\t\t\t$('#choose-text-direction').text(chooseText);\n\t\t\t});\n\t\t});\n\n\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTable5.json\", function (response) {\n\t\t\tvar rightTableApi3 = $('table#right-table3', this.page).DataTable({\n\t\t\t\t\"scrollY\": rightTableHeight,\n\t\t\t\t\"ordering\": false,\n\t\t\t\t\"serverSide\": false,\n\t\t\t\t\"searching\": true,\n\t\t\t\t\"searchDelay\": 400,\n\t\t\t\t\"paging\": false,\n\t\t\t\t\"info\": false,\n\t\t\t\t\"columns\": [{\n\t\t\t\t\t\"data\": \"description\",\n\t\t\t\t\t\"name\": \"description\"\n\t\t\t\t}],\n\t\t\t\t\"data\": response.list || []\n\t\t\t});\n\t\t\t$('#right-search3').on('keyup click', function () {\n\t\t\t\tvar key = $(this)[0].value;\n\t\t\t\trightTableApi3.search(key, false, true).draw();\n\t\t\t});\n\t\t\t$('table#right-table3 tbody').on('click', 'tr', function () {\n\t\t\t\t$('table#right-table3 tr.selected').removeClass('selected');\n\t\t\t\t$(this).toggleClass('selected');\n\n\t\t\t\tvar chooseText = $('table#right-table3 tr.selected td:first-child').text();\n\t\t\t\t$('#choose-text-defect').text(chooseText);\n\t\t\t});\n\t\t});\n\t},\n\tloadTree: function loadTree() {\n\t\tvar _this = this;\n\t\t$.getJSON(app.xhrUrl + \"defectsCaptureTree.json\", function (response) {\n\t\t\t_this.createTree(\"#desfects-tree-table\", response.list);\n\t\t});\n\t},\n\tcreateTree: function createTree(domNode, data) {\n\t\tvar _this = this;\n\t\tvar setting = {\n\t\t\tdata: {\n\t\t\t\tkey: {\n\t\t\t\t\tname: \"name\",\n\t\t\t\t\ttitle: \"name\"\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthis.zTreeObj = $.fn.zTree.init($(domNode), setting, data);\n\t\t$('#tree-search').on('keyup click', function () {\n\t\t\tvar key = $(this)[0].value;\n\t\t\t_this.searchTree(key);\n\t\t});\n\t},\n\tsearchTree: function searchTree(key) {\n\t\tvar _this = this;\n\t\t_this.zTreeObj.showNodes(_this.hiddenNodes);\n\n\t\tfunction filterFunc(node) {\n\t\t\tif (node.isParent || node.name.indexOf(key) != -1) return false;\n\t\t\treturn true;\n\t\t};\n\n\t\t_this.hiddenNodes = _this.zTreeObj.getNodesByFilter(filterFunc);\n\n\t\t_this.zTreeObj.hideNodes(_this.hiddenNodes);\n\t}\n};\n\nmodule.exports = defectsCaptureCtrl;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(77)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// assets/js/pages/pqs_defectsCapture_d0f3e58ceab3359b20a3.js","// 缺陷采集\r\nvar defectsCaptureCtrl = {\r\n\tpage : undefined,\r\n\ttreeData : undefined,\r\n\tzTreeObj : undefined,\r\n\thiddenNodes: undefined,\r\n\tinit: function() {\r\n\t\t$(document).off(\"keydown\");\r\n\t\tutil.setBreadcrumb([\"缺陷采集\"]);\r\n\t\tthis.loadPage();\r\n\t\tthis.loadTree();\r\n\t\tthis.event();\r\n\t\t// app.formElementsRender($(\".choose-input-panel\",this.page));\r\n\t},\r\n\tevent : function(){\r\n\t\tvar _this = this;\r\n\r\n\t\t$(\".toggle-left-btn\",_this.page).on(\"click\",function(e){\r\n\t\t\t$(\".defect-left-panel\").toggle();\r\n\t\t});\r\n\r\n\t\t$(\"#open-picker-defectscapture\",_this.page).on(\"click\",function(e){\r\n\t\t\t$(\".masked\",_this.page).show();\r\n\t\t\tF7.pickerModal('.picker-defectscapture')\r\n\t\t});\r\n\r\n\t\t$(\".masked,.close-picker-btn\",_this.page).on(\"click\",function (e) {\r\n\t\t\t$(\".masked\",_this.page).hide();\r\n\t\t\tF7.closeModal('.picker-defectscapture');\r\n\r\n\t\t\tvar radioSelect = $('input:radio[name=\"duty-type-other\"]:checked');\r\n\t\t\tif(radioSelect.length > 0){\r\n\r\n\t\t\t\t$('#duty-type-6').val(radioSelect.val());\r\n\r\n\t\t\t\tvar otherText = $('input:radio[name=\"duty-type-other\"]:checked+label').text();\r\n\t\t\t\t$('#duty-type-6+label').text(otherText);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(\".other-input\",_this.page).on(\"click\",function(e){\r\n\t\t\t$('#defect-count-4').click();\r\n\t\t\t$(this).focus();\r\n\t\t})\r\n\r\n\t},\r\n\tloadPage : function(){\r\n\t\t// 左侧第 1 张表\r\n\t\t$('table#tab1-table-left',this.page).DataTable({\r\n\t\t\t\"scrollY\": \"270px\",\r\n\t\t\t\"ordering\": false,\r\n\t\t\t\"searching\": false,\r\n\t\t\t\"paging\": false,\r\n\t\t\t\"info\": false,\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"width\" : \"35px\",\r\n\t\t\t\t\t\"name\": \"index\",\r\n\t\t\t\t\t\"data\": \"index\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"width\" : \"165px\",\r\n\t\t\t\t\t\"data\": \"description\",\r\n\t\t\t\t\t\"name\": \"description\",\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"ajax\": function (data, callback, settings) { //封装请求参数\r\n\t\t\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTable1.json\",function(response){\r\n\t\t\t\t\tvar result = {\r\n\t\t\t\t\t\tdata: response.list || []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(result);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('table#tab1-table-left tbody').on( 'click', 'tr', function () {\r\n\t\t\t$('table#tab1-table-left tr.selected').removeClass('selected');\r\n\t\t\t$(this).toggleClass('selected');\r\n\r\n\t\t\tvar chooseText = $('table#tab1-table-left tr.selected td:first-child').text();\r\n\t\t\t$('#choose-text-part').text(chooseText);\r\n\r\n\t\t} );\r\n\t\t// 左侧第 2 张表\r\n\t\t$('table#tab1-table-right',this.page).DataTable({\r\n\t\t\t\"scrollY\": \"270px\",\r\n\t\t\t\"ordering\": false,\r\n\t\t\t\"searching\": false,\r\n\t\t\t\"paging\": false,\r\n\t\t\t\"info\": false,\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"width\" : \"35px\",\r\n\t\t\t\t\t\"name\": \"index\",\r\n\t\t\t\t\t\"data\": \"index\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"width\" : \"85px\",\r\n\t\t\t\t\t\"data\": \"description\",\r\n\t\t\t\t\t\"name\": \"description\",\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"ajax\": function (data, callback, settings) { //封装请求参数\r\n\t\t\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTable2.json\",function(response){\r\n\t\t\t\t\tvar result = {\r\n\t\t\t\t\t\tdata: response.list || []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(result);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('table#tab1-table-right tbody').on( 'click', 'tr', function () {\r\n\t\t\t$('table#tab1-table-right tr.selected').removeClass('selected');\r\n\t\t\t$(this).toggleClass('selected');\r\n\r\n\t\t\tvar chooseText = $('table#tab1-table-right tr.selected td:first-child').text();\r\n\t\t\t$('#choose-text-direction').text(chooseText);\r\n\t\t} );\r\n\r\n\t\t// 计算右侧三张表的高度\r\n\t\tvar rightTableHeight = (window.innerHeight - 502) + 'px';\r\n\t\t// 右侧第 1 张表\r\n\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTable3.json\",function(response){\r\n\t\t\tvar rightTableApi1 = $('table#right-table1',this.page).DataTable({\r\n\t\t\t\t\"scrollY\": rightTableHeight,\r\n\t\t\t\t\"ordering\": false,\r\n\t\t\t\t\"serverSide\": false,\r\n\t\t\t\t\"searching\": true,\r\n\t\t\t\t\"searchDelay\": 400,\r\n\t\t\t\t\"paging\": false,\r\n\t\t\t\t\"info\": false,\r\n\t\t\t\t\"columns\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"data\": \"description\",\r\n\t\t\t\t\t\t\"name\": \"description\",\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"data\": response.list || []\r\n\t\t\t});\r\n\t\t\t$('#right-search1').on('keyup click',function () {\r\n\t\t\t\tvar key = $(this)[0].value;\r\n\t\t\t\trightTableApi1.search(key, false, true).draw();\r\n\t\t\t});\r\n\t\t\t$('table#right-table1 tbody').on( 'click', 'tr', function () {\r\n\t\t\t\t$('table#right-table1 tr.selected').removeClass('selected');\r\n\t\t\t\t$(this).toggleClass('selected');\r\n\r\n\t\t\t\tvar chooseText = $('table#right-table1 tr.selected td:first-child').text();\r\n\t\t\t\t$('#choose-text-part').text(chooseText);\r\n\t\t\t});\r\n\t\t});\r\n\t\t// 右侧第 2 张表\r\n\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTable4.json\",function(response){\r\n\t\t\tvar rightTableApi2 = $('table#right-table2',this.page).DataTable({\r\n\t\t\t\t\"scrollY\": rightTableHeight,\r\n\t\t\t\t\"ordering\": false,\r\n\t\t\t\t\"serverSide\": false,\r\n\t\t\t\t\"searching\": true,\r\n\t\t\t\t\"searchDelay\": 400,\r\n\t\t\t\t\"paging\": false,\r\n\t\t\t\t\"info\": false,\r\n\t\t\t\t\"columns\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"data\": \"description\",\r\n\t\t\t\t\t\t\"name\": \"description\",\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"data\": response.list || []\r\n\t\t\t});\r\n\t\t\t$('#right-search2').on('keyup click',function () {\r\n\t\t\t\tvar key = $(this)[0].value;\r\n\t\t\t\trightTableApi2.search(key, false, true).draw();\r\n\t\t\t});\r\n\t\t\t$('table#right-table2 tbody').on( 'click', 'tr', function () {\r\n\t\t\t\t$('table#right-table2 tr.selected').removeClass('selected');\r\n\t\t\t\t$(this).toggleClass('selected');\r\n\r\n\t\t\t\tvar chooseText = $('table#right-table2 tr.selected td:first-child').text();\r\n\t\t\t\t$('#choose-text-direction').text(chooseText);\r\n\t\t\t} );\r\n\t\t});\r\n\t\t// 右侧第 3 张表\r\n\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTable5.json\",function(response){\r\n\t\t\tvar rightTableApi3 = $('table#right-table3',this.page).DataTable({\r\n\t\t\t\t\"scrollY\": rightTableHeight,\r\n\t\t\t\t\"ordering\": false,\r\n\t\t\t\t\"serverSide\": false,\r\n\t\t\t\t\"searching\": true,\r\n\t\t\t\t\"searchDelay\": 400,\r\n\t\t\t\t\"paging\": false,\r\n\t\t\t\t\"info\": false,\r\n\t\t\t\t\"columns\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"data\": \"description\",\r\n\t\t\t\t\t\t\"name\": \"description\",\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"data\": response.list || []\r\n\t\t\t});\r\n\t\t\t$('#right-search3').on('keyup click',function () {\r\n\t\t\t\tvar key = $(this)[0].value;\r\n\t\t\t\trightTableApi3.search(key, false, true).draw();\r\n\t\t\t});\r\n\t\t\t$('table#right-table3 tbody').on( 'click', 'tr', function () {\r\n\t\t\t\t$('table#right-table3 tr.selected').removeClass('selected');\r\n\t\t\t\t$(this).toggleClass('selected');\r\n\r\n\t\t\t\tvar chooseText = $('table#right-table3 tr.selected td:first-child').text();\r\n\t\t\t\t$('#choose-text-defect').text(chooseText);\r\n\t\t\t} );\r\n\t\t});\r\n\t},\r\n\tloadTree : function () {\r\n\t\tvar _this = this;\r\n\t\t$.getJSON(app.xhrUrl+\"defectsCaptureTree.json\",function(response){\r\n\t\t\t// _this.treeData = response.list || [];\r\n\t\t\t// _this.createTree(\"#desfects-tree-table\", _this.treeData);\r\n\t\t\t_this.createTree(\"#desfects-tree-table\", response.list);\r\n\t\t});\r\n\t},\r\n\tcreateTree : function (domNode , data) {\r\n\t\tvar _this = this;\r\n\t\tvar setting = {\t\t//ztree配置选项\r\n\t\t\tdata: {\r\n\t\t\t\tkey: {\r\n\t\t\t\t\tname:\"name\",\r\n\t\t\t\t\ttitle: \"name\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.zTreeObj = $.fn.zTree.init($(domNode), setting, data);\r\n\t\t$('#tree-search').on('keyup click',function () {\r\n\t\t\tvar key = $(this)[0].value;\r\n\t\t\t_this.searchTree(key);\r\n\t\t});\r\n\t},\r\n\tsearchTree : function (key) {\r\n\t\tvar _this = this;\r\n\t\t_this.zTreeObj.showNodes(_this.hiddenNodes);\r\n\t\t//查找不符合条件的叶子节点\r\n\t\tfunction filterFunc(node){\r\n\t\t\tif(node.isParent||node.name.indexOf(key)!=-1) return false;\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t//获取不符合条件的叶子结点\r\n\t\t_this.hiddenNodes=_this.zTreeObj.getNodesByFilter(filterFunc);\r\n\t\t//隐藏不符合条件的叶子结点\r\n\t\t_this.zTreeObj.hideNodes(_this.hiddenNodes);\r\n\t}\r\n}\r\n\r\nmodule.exports = defectsCaptureCtrl\r\n\r\n// $(domNode).append(loadTree(data));\r\n// nodeClick(domNode);\r\n// /**\r\n//  * 使用递归遍历json字符串，生成树结构\r\n//  * @param  {[type]} tData json字符串\r\n//  * @return {[type]}       返回树结构\r\n//  */\r\n// function loadTree(tData){\r\n// \tvar ul = $('<ul>');\r\n// \tfor(var i=0; i<tData.length; i++){\r\n// \t\tif(tData[i].show) {\r\n// \t\t\tvar li = $('<li>').appendTo(ul);\r\n// \t\t\tvar node = $('<a>').appendTo(li);\r\n// \t\t\tvar icon = $('<i>').css('margin-right','5').appendTo(node);\r\n// \t\t\tvar aTree = $('<span>').html(tData[i].title).appendTo(node);\r\n// \t\t\tvar input = $('<input>').addClass('field').val(tData[i].field).css({'display':'none'}).appendTo(node);\r\n//\r\n// \t\t\t// 处理有子节点的\r\n// \t\t\tif(tData[i].children != undefined){\r\n// \t\t\t\t// 添加图标样式\r\n// \t\t\t\ticon.addClass('fa fa-minus-square-o');\r\n// \t\t\t\tvar ic = $('<i>').addClass('fa fa-folder-open-o');\r\n// \t\t\t\ticon.after(ic).addClass('status');\r\n// \t\t\t\tnode.addClass('tree-node');\r\n//\r\n// \t\t\t\t// 添加标记节点是否打开\r\n// \t\t\t\t$('<input>').addClass('open').val(tData[i].open).css('display','none').appendTo(node);\r\n//\r\n// \t\t\t\t// 递归遍历子节点\r\n// \t\t\t\tloadTree(tData[i].children).appendTo(li);\r\n// \t\t\t} else{\r\n// \t\t\t\ticon.addClass('fa fa-file-text-o');\r\n// \t\t\t\tnode.addClass('tree-leaf');\r\n// \t\t\t\t// 叶子节点新增是否可选\r\n// \t\t\t\t// $('<input>').addClass('candidate').val(tData[i].candidate).css('display','none').appendTo(li);\r\n// \t\t\t}\r\n// \t\t}\r\n// \t}\r\n// \treturn ul;\r\n// }\r\n//\r\n// // /**\r\n// //  * 节点点击事件\r\n// //  * @param  {[type]} box 存在菜单树的盒子\r\n// //  */\r\n// function nodeClick(box){\r\n// \t$(box).find('.tree-node').click(function(){\r\n// \t\t// 判断该节点是否开启\r\n// \t\tif($.trim($(this).find('.open').val()) == 'true'){\r\n// \t\t\t// 已开启，则关闭节点\r\n// \t\t\t$(this).next().slideUp(500);\r\n// \t\t\t$(this).find('.open').val('false');\r\n// \t\t\t$(this).find('.status').removeClass('fa-minus-square-o').addClass('fa-plus-square-o');\r\n// \t\t} else{\r\n// \t\t\t// 开启前关闭节点下的所有节点\r\n// \t\t\t$(this).next().find('.tree-node').each(function(){\r\n// \t\t\t\t$(this).next().css('display','none');\r\n// \t\t\t\t$(this).find('.open').val('false');\r\n// \t\t\t\t$(this).find('.status').removeClass('fa-minus-square-o').addClass('fa-plus-square-o');\r\n// \t\t\t})\r\n//\r\n// \t\t\t// 已关闭，则开启节点\r\n// \t\t\t$(this).find('.open').val('true');\r\n// \t\t\t$(this).find('.status').removeClass('fa-plus-square-o').addClass('fa-minus-square-o');\r\n// \t\t\t// 开启节点下的节点\r\n//\r\n// \t\t\t$(this).next().slideDown(500);\r\n// \t\t}\r\n// \t})\r\n//\r\n// \t$(box).find('.tree-leaf').click(function (e) {\r\n// \t\t$(box).find('.tree-leaf').removeClass('selected');\r\n// \t\t$(this).addClass('selected');\r\n//\r\n// \t\tvar chooseText = $(this).text();\r\n// \t\t$('#choose-text-defect').text(chooseText);\r\n// \t})\r\n// }\r\n//\r\n// var _this = this;\r\n// function searchAction(jsonData, key) {\r\n// \tfor(var i=0; i<jsonData.length; i++){\r\n// \t\tif(jsonData[i].title.toLowerCase().indexOf(key)<0 && tData[i].children == undefined) {\r\n// \t\t\tjsonData[i].show = false;\r\n// \t\t\treturn false;\r\n// \t\t} else if(jsonData[i].title.toLowerCase().indexOf(key)<0 && tData[i].children != undefined) {\r\n// \t\t\tvar flg = false;\r\n// \t\t\t$.each(jsonData[i].children,function (index,item) {\r\n// \t\t\t\tif(searchAction(item, key)){\r\n// \t\t\t\t\tflg = true;\r\n// \t\t\t\t};\r\n// \t\t\t})\r\n// \t\t\tjsonData[i].show = flg;\r\n// \t\t\treturn flg;\r\n// \t\t}\r\n// \t}\r\n// }\n\n\n// WEBPACK FOOTER //\n// ./src/js/pages/pqs/defectsCapture.js"],"sourceRoot":""}