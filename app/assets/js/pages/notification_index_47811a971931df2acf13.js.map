{"version":3,"sources":["webpack:///assets/js/pages/notification_index_47811a971931df2acf13.js","webpack:///./src/js/pages/notification/index.js"],"names":["webpackJsonp","627","module","exports","__webpack_require__","i18next","$","app","security","util","notificationCtrl","page","undefined","userCode","msgTpl","listLoadProcess","readShowFlag","init","setBreadcrumb","t","that","this","userProfile","getUserProfile","initFn","loginUserDataReload","msgTplHtml","html","Template7","compile","all","loading","pageNum","numPerPage","messageTypeEcodes","renderId","full","normal","popup","active","state","loadPage","loadMoreEvent","expandBtnEvent","readFlagFilterEvent","_loadDataAndRenderList","_this","on","$thisBtn","siblings","removeClass","addClass","hasClass","type","msgRender","response","loadProcess","data","len","length","next","show","i","readFlag","extClass","messageTypeEcode","messageType","receivedTime","messageTime","time","getzf","num","parseInt","tmpDate","Date","year","getFullYear","mathon","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","renderData","list","append","param","serviceCode","siteCode","request","url","success","rightCode","$expandBtn","$li","parents","messageId","attr","console","log","call"],"mappings":"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","file":"assets/js/pages/notification_index_47811a971931df2acf13.js","sourcesContent":["webpackJsonp([30],{\n\n/***/ 627:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(i18next, $, app) {\n\nvar security = __webpack_require__(35);\nvar util = __webpack_require__(34);\n\nvar notificationCtrl = {\n    page: undefined,\n    userCode: undefined,\n    msgTpl: undefined,\n    listLoadProcess: undefined,\n    readShowFlag: undefined,\n    init: function init() {\n        util.setBreadcrumb([i18next.t(\"COMMON.B.MESSAGE\")]);\n\n        var that = this;\n        var userProfile = security.getUserProfile();\n\n        if (!userProfile) {\n            security.loginUserDataReload(function () {\n                that.initFn(security.getUserProfile());\n            });\n        } else {\n            that.initFn(userProfile);\n        }\n    },\n    initFn: function initFn(userProfile) {\n        this.userCode = userProfile.userCode;\n        var msgTplHtml = $(\"#msgTpl\", this.page).html();\n        this.msgTpl = Template7.compile(msgTplHtml);\n\n        this.listLoadProcess = {\n            all: {\n                loading: false,\n                pageNum: 1,\n                numPerPage: 10,\n                messageTypeEcodes: \"\",\n                renderId: \"#msgRednder1\",\n                full: false\n            },\n            normal: {\n                loading: false,\n                pageNum: 1,\n                numPerPage: 10,\n                messageTypeEcodes: \"NORMAL\",\n                renderId: \"#msgRednder2\",\n                full: false\n            },\n            popup: {\n                loading: false,\n                pageNum: 1,\n                numPerPage: 10,\n                messageTypeEcodes: \"POPUP\",\n                renderId: \"#msgRednder3\",\n                full: false\n            }\n        };\n        this.readShowFlag = {\n            active: false,\n            state: 0\n        };\n        this.loadPage();\n        this.loadMoreEvent();\n        this.expandBtnEvent();\n        this.readFlagFilterEvent();\n    },\n    loadPage: function loadPage() {\n        this._loadDataAndRenderList(\"all\");\n        this._loadDataAndRenderList(\"normal\");\n        this._loadDataAndRenderList(\"popup\");\n    },\n    readFlagFilterEvent: function readFlagFilterEvent() {\n        var _this = this;\n        $(\".readFlagBtns\", _this.page).on('click', 'button', function () {\n            var $thisBtn = $(this);\n            $thisBtn.siblings().removeClass(\"buttonActive\");\n            $thisBtn.addClass(\"buttonActive\");\n\n            if ($thisBtn.hasClass(\"readShowBtn\")) {\n                $(\".tabs\", _this.page).removeClass(\"unreadShow\").addClass(\"readShow\");\n                _this.readShowFlag.active = true;\n                _this.readShowFlag.state = 1;\n            } else if ($thisBtn.hasClass(\"unreadShowBtn\")) {\n                $(\".tabs\", _this.page).removeClass(\"readShow\").addClass(\"unreadShow\");\n                _this.readShowFlag.active = true;\n                _this.readShowFlag.state = 0;\n            } else {\n                $(\".tabs\", _this.page).removeClass(\"readShow\").removeClass(\"unreadShow\");\n                _this.readShowFlag.active = false;\n            }\n        });\n    },\n    loadMoreEvent: function loadMoreEvent() {\n        var _this = this;\n        $(\"#tab1\").on('infinite', function () {\n            if (_this.listLoadProcess.all.full) return;\n            _this._loadDataAndRenderList(\"all\");\n        });\n\n        $(\"#tab2\").on('infinite', function () {\n            if (_this.listLoadProcess.normal.full) return;\n            _this._loadDataAndRenderList(\"normal\");\n        });\n\n        $(\"#tab3\").on('infinite', function () {\n            if (_this.listLoadProcess.popup.full) return;\n            _this._loadDataAndRenderList(\"popup\");\n        });\n    },\n    _loadDataAndRenderList: function _loadDataAndRenderList(type) {\n        var _this = this;\n        var loadProcess = _this.listLoadProcess[type];\n        if (loadProcess.loading) return;\n        loadProcess.loading = true;\n\n        var param = {\n            serviceCode: \"GMES-CLIENT-MSG0003\",\n            siteCode: app.siteCode,\n            userCode: this.userCode,\n            numPerPage: loadProcess.numPerPage,\n            pageNum: loadProcess.pageNum,\n            messageTypeEcodes: loadProcess.messageTypeEcodes\n        };\n        if (_this.readShowFlag.active) {\n            param.readFlag = _this.readShowFlag.state;\n        }\n        app.request({\n            url: \"restful/service/execute\",\n            data: param,\n            success: function success(response) {\n                util.rightCode(response, msgRender);\n            }\n        });\n\n        function msgRender(response) {\n            loadProcess.loading = false;\n\n            var data = response.data.data;\n            var len = data.length;\n            if (len > 0) {\n                loadProcess.pageNum += 1;\n            } else {\n                loadProcess.full = true;\n                $(loadProcess.renderId, _this.page).next().show();\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                if (data[i].readFlag === \"0\") {\n                    data[i].extClass = \"un-read\";\n                } else {\n                    data[i].extClass = \"\";\n                }\n\n                if (data[i].messageTypeEcode === \"NORMAL\") {\n                    data[i].messageType = \"普通消息\";\n                } else if (data[i].messageTypeEcode === \"SCROLL\") {\n                    data[i].messageType = \"滚屏消息\";\n                } else if (data[i].messageTypeEcode === \"POPUP\") {\n                    data[i].messageType = \"弹出公告\";\n                } else {\n                    data[i].messageType = \"全部\";\n                }\n\n                if (data[i].receivedTime) {\n                    data[i].messageTime = formatDate(data[i].receivedTime);\n                }\n            }\n            var renderData = {\n                list: data\n            };\n            var html = _this.msgTpl(renderData);\n            $(loadProcess.renderId, _this.page).append(html);\n\n            function formatDate(time) {\n                var tmpDate = new Date(time);\n                var year = tmpDate.getFullYear();\n                var mathon = tmpDate.getMonth() + 1;\n                var day = tmpDate.getDate();\n                var hours = tmpDate.getHours();\n                var minutes = tmpDate.getMinutes();\n                var seconds = tmpDate.getSeconds();\n                return year + '-' + getzf(mathon) + '-' + getzf(day) + ' ' + getzf(hours) + ':' + getzf(minutes) + ':' + getzf(seconds);\n\n                function getzf(num) {\n                    if (parseInt(num) < 10) {\n                        num = '0' + num;\n                    }\n                    return num;\n                }\n            }\n        }\n    },\n    expandBtnEvent: function expandBtnEvent() {\n        var _this = this;\n\n        $(\".tabs-swipeable-wrap\", _this.page).on('click', '.expandBtn', function () {\n            var $expandBtn = $(this);\n            var $li = $expandBtn.parents(\"li.inf-brief\");\n            if ($li.hasClass(\"txt-expand\")) {\n                $li.removeClass(\"txt-expand\");\n                $(\"a\", $expandBtn).html(\"展开\");\n            } else {\n                $li.addClass(\"txt-expand\");\n                $(\"a\", $expandBtn).html(\"收起\");\n            }\n\n            if ($li.hasClass(\"un-read\")) {\n                $li.removeClass(\"un-read\");\n                var messageId = $li.attr(\"messageId\");\n                app.request({\n                    url: \"restful/service/execute\",\n                    data: {\n                        serviceCode: \"GMES-CLIENT-MSG0005\",\n                        siteCode: app.siteCode,\n                        messageId: messageId\n                    },\n                    success: function success(response) {\n                        util.rightCode(response, function () {\n                            console.log(messageId + \" 标记已读成功\");\n                        });\n                    }\n                });\n            }\n        });\n    }\n};\n\nmodule.exports = notificationCtrl;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(37), __webpack_require__(4), __webpack_require__(77)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// assets/js/pages/notification_index_47811a971931df2acf13.js","var security = require(\"security\");\r\nvar util = require(\"util\");\r\n\r\nvar notificationCtrl = {\r\n    page: undefined,\r\n    userCode: undefined,\r\n    msgTpl: undefined,\r\n    listLoadProcess: undefined,\r\n    readShowFlag: undefined,\r\n    init: function() {\r\n        // util.setBreadcrumb([\"消息\"]);\r\n        util.setBreadcrumb([i18next.t(\"COMMON.B.MESSAGE\")]);\r\n\r\n        var that = this;\r\n        var userProfile = security.getUserProfile();\r\n        \r\n        if (!userProfile) {\r\n        \tsecurity.loginUserDataReload(function(){\r\n        \t\tthat.initFn(security.getUserProfile());\r\n        \t});\r\n        } else {\r\n        \tthat.initFn(userProfile);\r\n        }\r\n\r\n    },\r\n    initFn: function(userProfile) {\r\n        this.userCode = userProfile.userCode; //获得用户信息，方便使用\r\n        // 消息渲染模板保存下来，方便使用\r\n        var msgTplHtml = $(\"#msgTpl\", this.page).html();\r\n        this.msgTpl = Template7.compile(msgTplHtml);\r\n        // 三个tab的加载的状态保存在\r\n        this.listLoadProcess = {\r\n            all: {\r\n                loading: false,\r\n                pageNum: 1,\r\n                numPerPage: 10,\r\n                messageTypeEcodes: \"\",\r\n                renderId: \"#msgRednder1\",\r\n                full: false\r\n            },\r\n            normal: {\r\n                loading: false,\r\n                pageNum: 1,\r\n                numPerPage: 10,\r\n                messageTypeEcodes: \"NORMAL\",\r\n                renderId: \"#msgRednder2\",\r\n                full: false\r\n            },\r\n            popup: {\r\n                loading: false,\r\n                pageNum: 1,\r\n                numPerPage: 10,\r\n                messageTypeEcodes: \"POPUP\",\r\n                renderId: \"#msgRednder3\",\r\n                full: false\r\n            }\r\n        };\r\n        this.readShowFlag = {\r\n            active: false,\r\n            state: 0\r\n        };\r\n        this.loadPage(); // 初始化时三个tab页各获取10条消息\r\n        this.loadMoreEvent(); // 三个tab也绑定下拉刷新的事件\r\n        this.expandBtnEvent();\r\n        this.readFlagFilterEvent();\r\n    },\r\n    loadPage: function() {\r\n        this._loadDataAndRenderList(\"all\");\r\n        this._loadDataAndRenderList(\"normal\");\r\n        this._loadDataAndRenderList(\"popup\");\r\n    },\r\n    readFlagFilterEvent: function() {\r\n        var _this = this;\r\n        $(\".readFlagBtns\", _this.page).on('click', 'button', function() {\r\n            var $thisBtn = $(this);\r\n            $thisBtn.siblings().removeClass(\"buttonActive\");\r\n            $thisBtn.addClass(\"buttonActive\");\r\n\r\n            if ($thisBtn.hasClass(\"readShowBtn\")) {\r\n                $(\".tabs\", _this.page).removeClass(\"unreadShow\").addClass(\"readShow\");\r\n                _this.readShowFlag.active = true;\r\n                _this.readShowFlag.state = 1;\r\n            } else if ($thisBtn.hasClass(\"unreadShowBtn\")) {\r\n                $(\".tabs\", _this.page).removeClass(\"readShow\").addClass(\"unreadShow\");\r\n                _this.readShowFlag.active = true;\r\n                _this.readShowFlag.state = 0;\r\n            } else {\r\n                $(\".tabs\", _this.page).removeClass(\"readShow\").removeClass(\"unreadShow\");\r\n                _this.readShowFlag.active = false;\r\n            }\r\n        });\r\n    },\r\n    loadMoreEvent: function() {\r\n        var _this = this;\r\n        $(\"#tab1\").on('infinite', function() {\r\n            if (_this.listLoadProcess.all.full) return;\r\n            _this._loadDataAndRenderList(\"all\");\r\n        });\r\n\r\n        $(\"#tab2\").on('infinite', function() {\r\n            if (_this.listLoadProcess.normal.full) return;\r\n            _this._loadDataAndRenderList(\"normal\");\r\n        });\r\n\r\n        $(\"#tab3\").on('infinite', function() {\r\n            if (_this.listLoadProcess.popup.full) return;\r\n            _this._loadDataAndRenderList(\"popup\");\r\n        });\r\n\r\n    },\r\n    _loadDataAndRenderList: function(type) {\r\n        var _this = this;\r\n        var loadProcess = _this.listLoadProcess[type];\r\n        if (loadProcess.loading) return;\r\n        loadProcess.loading = true;\r\n        // $(loadProcess.renderId, _this.page).next().show();\r\n        var param = {\r\n            serviceCode: \"GMES-CLIENT-MSG0003\",\r\n            siteCode: app.siteCode,\r\n            userCode: this.userCode,\r\n            numPerPage: loadProcess.numPerPage,\r\n            pageNum: loadProcess.pageNum,\r\n            messageTypeEcodes: loadProcess.messageTypeEcodes\r\n        };\r\n        if (_this.readShowFlag.active) {\r\n            param.readFlag = _this.readShowFlag.state;\r\n        }\r\n        app.request({\r\n            url: \"restful/service/execute\",\r\n            data: param,\r\n            success: function(response) {\r\n                util.rightCode(response, msgRender);\r\n            }\r\n        });\r\n\r\n        function msgRender(response) {\r\n            loadProcess.loading = false;\r\n            // $(loadProcess.renderId, _this.page).next().hide();\r\n            var data = response.data.data;\r\n            var len = data.length;\r\n            if (len > 0) {\r\n                loadProcess.pageNum += 1;\r\n            } else {\r\n                loadProcess.full = true;\r\n                $(loadProcess.renderId, _this.page).next().show();\r\n                return;\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                if (data[i].readFlag === \"0\") {\r\n                    data[i].extClass = \"un-read\";\r\n                } else {\r\n                    data[i].extClass = \"\";\r\n                }\r\n\r\n                if (data[i].messageTypeEcode === \"NORMAL\") {\r\n                    data[i].messageType = \"普通消息\";\r\n                } else if (data[i].messageTypeEcode === \"SCROLL\") {\r\n                    data[i].messageType = \"滚屏消息\";\r\n                } else if (data[i].messageTypeEcode === \"POPUP\") {\r\n                    data[i].messageType = \"弹出公告\";\r\n                } else {\r\n                    data[i].messageType = \"全部\";\r\n                }\r\n\r\n                if (data[i].receivedTime) {\r\n                    data[i].messageTime = formatDate(data[i].receivedTime);\r\n                }\r\n            }\r\n            var renderData = {\r\n                list: data\r\n            };\r\n            var html = _this.msgTpl(renderData);\r\n            $(loadProcess.renderId, _this.page).append(html);\r\n            // this.spread();\r\n            // 格式化时间\r\n            function formatDate(time) {\r\n                var tmpDate = new Date(time);\r\n                var year = tmpDate.getFullYear();\r\n                var mathon = tmpDate.getMonth() + 1;\r\n                var day = tmpDate.getDate();\r\n                var hours = tmpDate.getHours();\r\n                var minutes = tmpDate.getMinutes();\r\n                var seconds = tmpDate.getSeconds();\r\n                return year + '-' + getzf(mathon) + '-' + getzf(day) + ' ' + getzf(hours) + ':' + getzf(minutes) + ':' + getzf(seconds);\r\n                //补0操作\r\n                function getzf(num) {\r\n                    if (parseInt(num) < 10) {\r\n                        num = '0' + num;\r\n                    }\r\n                    return num;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    expandBtnEvent: function() {\r\n        var _this = this;\r\n        // 点击单条信息，跳到消息详情页码，并将此条消息的信息传递过去\r\n        $(\".tabs-swipeable-wrap\", _this.page).on('click', '.expandBtn', function() {\r\n            var $expandBtn = $(this);\r\n            var $li = $expandBtn.parents(\"li.inf-brief\");\r\n            if ($li.hasClass(\"txt-expand\")) {\r\n                $li.removeClass(\"txt-expand\");\r\n                $(\"a\", $expandBtn).html(\"展开\");\r\n            } else {\r\n                $li.addClass(\"txt-expand\");\r\n                $(\"a\", $expandBtn).html(\"收起\");\r\n            }\r\n            // 如果未读则标记已读\r\n            if ($li.hasClass(\"un-read\")) {\r\n                $li.removeClass(\"un-read\");\r\n                var messageId = $li.attr(\"messageId\");\r\n                app.request({\r\n                    url: \"restful/service/execute\",\r\n                    data: {\r\n                        serviceCode: \"GMES-CLIENT-MSG0005\",\r\n                        siteCode: app.siteCode,\r\n                        messageId: messageId\r\n                    },\r\n                    success: function(response) {\r\n                        util.rightCode(response, function() {\r\n                            console.log(messageId + \" 标记已读成功\");\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nmodule.exports = notificationCtrl;\r\n\r\n/*F7.onPageInit('notification', function (page) {\r\n\t$(document).off(\"keydown\");\t\t// 别的页面去除主页的菜单快捷键\r\n\tnotificationCtrl.init($(page.container));\r\n\tapp.translate('.page[data-page=\"notification\"]');\r\n});*/\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/pages/notification/index.js"],"sourceRoot":""}