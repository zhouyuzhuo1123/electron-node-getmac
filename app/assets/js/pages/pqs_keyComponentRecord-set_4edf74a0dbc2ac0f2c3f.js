webpackJsonp([6,15],{615:function(t,e,a){"use strict";(function(e,n){var i=a(34),r=a(77),o={page:void 0,datatableApi:void 0,queryParam:{serviceCode:"GMES-CLIENT-KEYPART008",siteCode:r.siteCode,workCenterCode:"",stationCode:"",productNum:"",materialCode:"",materialText:"",supplierCode:"",productId:"",lotNum:"",supplierText:"",scanStartTime:"",scanEndTime:"",statusECodes:""},statusText:void 0,init:function(){i.translate(".page[data-page='keyComponentRecord']"),i.setBreadcrumb([e.t("KEYPART.T.MENU_RECORD")]),this.statusText={success:e.t("COMMON.T.SUCCESS"),exception:e.t("COMMON.T.EXCEPTION"),missing:e.t("COMMON.T.MISSING")},this.loadPage(),this.event()},event:function(){n(".toggle-right-btn",this.page).on("click",function(){Sweet.rightPanelView.router.loadPage("views/pqs/keyComponentRecord-set.html"),myApp.openPanel("right")})},loadPage:function(){var t=this,e=this.page.height-126;this.datatableApi=i.dataTable(n(".table-panel table",this.page),{scrollY:e,ordering:!1,order:[],ajax:{serviceCode:"GMES-CLIENT-KEYPART008",param:function(){return t.queryParam}},createdRow:function(t,e){1!=e.statusEcode&&n(t).addClass("error")},columns:[{data:"id",render:function(t,e,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"workCenterText",name:"workCenterText"},{data:"stationText",name:"stationText"},{data:"productNum",name:"productNum"},{data:"productId",name:"productId"},{data:"statusEcode",name:"statusEcode",render:function(e,a,n){var i,r;switch(n.statusECode){case"2":i=t.statusText.exception,r="#ef5362";break;case"1":i=t.statusText.success,r="#27c24c";break;default:i=t.statusText.missing,r="#ffce54"}return"<span style='color:"+r+";'>"+i+"</span>"}},{data:"keypartCode",name:"keypartCode"},{data:"keypartText",name:"keypartText"},{data:"supplierCode",name:"supplierCode"},{data:"supplierText",name:"supplierText"},{data:"lotNum",name:"lotNum"}]})},reloadDatatableByParam:function(t){this.queryParam=n.extend({},this.queryParam,t),this.datatableApi.ajax.reload()}};t.exports=o}).call(e,a(37),a(4))},648:function(t,e,a){"use strict";(function(e){var n=a(77),i=a(34),r=a(615),o={page:null,init:function(){i.translate('.page[data-page="keyComponentRecordSet"]'),this.event(),this.retrunBtn(),this.searchBtn(),this.initWorkCenterData(),this.renderTimePicker(),this.renderStatus(),this.inputFormat(),this.initStationSlect()},event:function(){var t=(window.innerHeight-50-70)/2+50+"px";e(".toggle-right-btn",this.page).css("top",t).on("click",function(t){myApp.closePanel("right")})},retrunBtn:function(){e(".btn-return",this.page).on("click",function(){myApp.closePanel("right")})},inputFormat:function(){e(".text-upperCase",this.page).keyup(function(t){this.value=this.value.replace(/[^\w\.\/]/gi,"")})},searchBtn:function(){e("[name='btnSearch']",this.page).on("click",function(){var t=myApp.formToJSON("#keypartRecordSetForm"),e={};e.workCenterCode=t.workCenterCode||"",e.stationCode=t.stationCode||"",e.productNum=t.productNum||"",e.keypartCode=t.keypartCode||"",e.kaypartText=t.keypartText||"",e.supplierCode=t.supplierCode||"",e.productId=t.productId||"",e.lotNum=t.lotNum||"",e.supplierText=t.supplierText||"",e.scanStartTime=t.scanTime.split(" - ")[0]||"",e.scanEndTime=t.scanTime.split(" - ")[1]||"",e.statusECode=t.statusECode.join(",")||"",e.siteCode=n.siteCode,e.serviceCode="GMES-CLIENT-KEYPART008",myApp.closePanel("right"),r.reloadDatatableByParam(e)})},initWorkCenterData:function(){var t=this;i.service("GMES-CLIENT-ANDON002",{},null,function(a){var n={allWorkCenterList:a.data};i.tplManager("allWorkCenterListTpl_keypart",n,"allWorkCenterListRender_keypart"),e("#allWorkCenterListRender_keypart",t.page).dropkick({change:function(){var a=e("#allWorkCenterListRender_keypart option:selected",t.page).val();t.reInitStationSlect(a)}})})},renderTimePicker:function(){n.datetimeRender("input.datetime",this.page)},renderStatus:function(){n.checkboxRender("input[name='statusECode']",this.page)},initStationSlect:function(){e("#stationListRender_keypart",this.page).dropkick({change:function(){}})},reInitStationSlect:function(t){var a=this;i.service("GMES-CLIENT-ANDON003",{workCenterCode:t},null,function(t){var n=t.data,r={stationList:n};e("#stationListContainer_keypart",a.page).empty(),e("#stationListContainer_keypart",a.page).html('<select class="form-select-control" id="stationListRender_keypart" name="stationCode"><option value=""></option></select>'),i.tplManager("stationListTpl_keypart",r,"stationListRender_keypart"),e("#stationListRender_keypart",a.page).dropkick({change:function(){}})})}};t.exports=o}).call(e,a(4))}});
//# sourceMappingURL=pqs_keyComponentRecord-set_4edf74a0dbc2ac0f2c3f.js.map