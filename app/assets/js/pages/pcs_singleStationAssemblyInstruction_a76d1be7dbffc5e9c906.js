webpackJsonp([22],{639:function(t,n,e){"use strict";(function(n,i){var o=e(35),a=e(53),s=e(34),r={$timeEl:void 0,pages:void 0,page:void 0,$page:void 0,moduleConfig:void 0,topic:void 0,init:function(){this.flag=n(".main-station").length,this.$page=n(this.page),this.$timeEl=n(".time span",this.$page),s.setZoom(this.page),s.translate(this.$page),this.initData()},initData:function(){var t=this,n="SINGLE_STATION_ASSEMBLY_INSTRUCTION";this.flag&&(n="SINGLE_MAIN_STATION_INSTRUCTION"),o.getSysModuleConfig("PCS",n).done(function(n){s.proConfig(n,function(n){t.moduleConfig=n,t.getDataAndRenderScreen(),t.subscribeNotify()})})},subscribeNotify:function(){var t=this,n="subassembly/"+o.getSiteCode()+"/"+t.moduleConfig.onlineStationCode;this.flag&&(n="productionConfirm/6321/"+t.moduleConfig.onlineStationCode),t.topic=n,a.subscribe(n,"singleStationAssemblyInstruction"),a.registerMessageHandler(n,"singleStationAssemblyInstruction.singleStationAssemblyInstruction",function(){t.getDataAndRenderScreen()})},getDataAndRenderScreen:function(){var t=this,n="GMES-CLIENT-PCS0005";this.flag&&(n="GMES-CLIENT-PCS0006"),s.service(n,{onlineStationCode:t.moduleConfig.onlineStationCode,assemblyStationCode:t.moduleConfig.assemblyStationCode,stationCode:t.moduleConfig.stationCode,rowNum:t.moduleConfig.rowNum||0},"正在加载中").done(function(n){if("0"!==n.returnCode)return void i.alert({text:n.errorMessage});var e=n.data;if(!e)return void i.alert({text:"站点无数据"});e=s.processData(t.moduleConfig,e);var o=t.moduleConfig.thresholdValue||3;e.warnShineFlag=!1,e.remainingQuantity&&e.remainingQuantity<=o&&(e.warnShineFlag=!0),s.tplManager("singleStationAssInsTpl",e,"singleStationAssInstrRender")})}};t.exports=r}).call(n,e(4),e(36))}});
//# sourceMappingURL=pcs_singleStationAssemblyInstruction_a76d1be7dbffc5e9c906.js.map