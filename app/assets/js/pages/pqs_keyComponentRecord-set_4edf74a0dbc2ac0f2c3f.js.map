{"version":3,"sources":["webpack:///assets/js/pages/pqs_keyComponentRecord-set_4edf74a0dbc2ac0f2c3f.js","webpack:///./src/js/pages/pqs/keyComponentRecord.js","webpack:///./src/js/pages/pqs/keyComponentRecord-set.js"],"names":["webpackJsonp","615","module","exports","__webpack_require__","i18next","$","util","app","keyComponentRecordCtrl","page","undefined","datatableApi","queryParam","serviceCode","siteCode","workCenterCode","stationCode","productNum","materialCode","materialText","supplierCode","productId","lotNum","supplierText","scanStartTime","scanEndTime","statusECodes","statusText","init","translate","setBreadcrumb","t","this","success","exception","missing","loadPage","event","on","Sweet","rightPanelView","router","myApp","openPanel","_this","scrollY","height","dataTable","ordering","order","ajax","param","createdRow","row","data","statusEcode","addClass","columns","render","type","meta","name","fontColor","statusECode","reloadDatatableByParam","extend","reload","call","648","keyComponentRecordSetViewCtrl","retrunBtn","searchBtn","initWorkCenterData","renderTimePicker","renderStatus","inputFormat","initStationSlect","top","window","innerHeight","css","e","closePanel","keyup","value","replace","formData","formToJSON","searchParam","keypartCode","kaypartText","keypartText","scanTime","split","join","service","response","renderData","allWorkCenterList","tplManager","dropkick","change","val","reInitStationSlect","datetimeRender","checkboxRender","stationListData","stationList","empty","html"],"mappings":"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","file":"assets/js/pages/pqs_keyComponentRecord-set_4edf74a0dbc2ac0f2c3f.js","sourcesContent":["webpackJsonp([6,15],{\n\n/***/ 615:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(i18next, $) {\n\nvar util = __webpack_require__(34);\nvar app = __webpack_require__(77);\n\nvar keyComponentRecordCtrl = {\n    page: undefined,\n    datatableApi: undefined,\n    queryParam: {\n        serviceCode: \"GMES-CLIENT-KEYPART008\",\n        siteCode: app.siteCode,\n        workCenterCode: \"\",\n        stationCode: \"\",\n        productNum: \"\",\n        materialCode: \"\",\n        materialText: \"\",\n        supplierCode: \"\",\n        productId: \"\",\n        lotNum: \"\",\n        supplierText: \"\",\n        scanStartTime: \"\",\n        scanEndTime: \"\",\n        statusECodes: \"\"\n    },\n    statusText: undefined,\n    init: function init() {\n        util.translate(\".page[data-page='keyComponentRecord']\");\n\n        util.setBreadcrumb([i18next.t(\"KEYPART.T.MENU_RECORD\")]);\n\n        this.statusText = {\n            \"success\": i18next.t(\"COMMON.T.SUCCESS\"),\n            \"exception\": i18next.t(\"COMMON.T.EXCEPTION\"),\n            \"missing\": i18next.t(\"COMMON.T.MISSING\")\n        };\n        this.loadPage();\n        this.event();\n    },\n    event: function event() {\n        $(\".toggle-right-btn\", this.page).on(\"click\", function () {\n            Sweet.rightPanelView.router.loadPage(\"views/pqs/keyComponentRecord-set.html\");\n            myApp.openPanel(\"right\");\n        });\n    },\n\n    loadPage: function loadPage() {\n        var _this = this;\n        var scrollY = this.page.height - 126;\n\n        this.datatableApi = util.dataTable($(\".table-panel table\", this.page), {\n            \"scrollY\": scrollY,\n            \"ordering\": false,\n            \"order\": [],\n            \"ajax\": {\n\n                serviceCode: \"GMES-CLIENT-KEYPART008\",\n                param: function param() {\n                    return _this.queryParam;\n                }\n            },\n            \"createdRow\": function createdRow(row, data) {\n                if (data.statusEcode != 1) {\n                    $(row).addClass(\"error\");\n                }\n            },\n            \"columns\": [{\n                \"data\": \"id\",\n                \"render\": function render(data, type, row, meta) {\n                    return meta[\"settings\"][\"_iDisplayStart\"] + meta.row + 1;\n                }\n            }, {\n                \"data\": \"workCenterText\",\n                \"name\": \"workCenterText\"\n            }, {\n                \"data\": \"stationText\",\n                \"name\": \"stationText\"\n            }, {\n                \"data\": \"productNum\",\n                \"name\": \"productNum\"\n            }, {\n                \"data\": \"productId\",\n                \"name\": \"productId\"\n            }, {\n                \"data\": \"statusEcode\",\n                \"name\": \"statusEcode\",\n                \"render\": function render(data, type, row) {\n                    var statusText;\n                    var fontColor;\n                    switch (row.statusECode) {\n                        case \"2\":\n                            {\n                                statusText = _this.statusText.exception;\n                                fontColor = \"#ef5362\";\n                                break;\n                            }\n                        case \"1\":\n                            {\n                                statusText = _this.statusText.success;\n                                fontColor = \"#27c24c\";\n                                break;\n                            }\n                        default:\n                            statusText = _this.statusText.missing;\n                            fontColor = \"#ffce54\";\n                    }\n                    return \"<span style='color:\" + fontColor + \";'>\" + statusText + \"</span>\";\n                }\n            }, {\n                \"data\": \"keypartCode\",\n                \"name\": \"keypartCode\"\n            }, {\n                \"data\": \"keypartText\",\n                \"name\": \"keypartText\"\n            }, {\n                \"data\": \"supplierCode\",\n                \"name\": \"supplierCode\"\n            }, {\n                \"data\": \"supplierText\",\n                \"name\": \"supplierText\"\n            }, {\n                \"data\": \"lotNum\",\n                \"name\": \"lotNum\"\n            }]\n        });\n    },\n\n    reloadDatatableByParam: function reloadDatatableByParam(param) {\n        this.queryParam = $.extend({}, this.queryParam, param);\n        this.datatableApi.ajax.reload();\n    }\n};\n\nmodule.exports = keyComponentRecordCtrl;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(37), __webpack_require__(4)))\n\n/***/ }),\n\n/***/ 648:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nvar app = __webpack_require__(77);\nvar util = __webpack_require__(34);\n\nvar keyComponentRecordCtrl = __webpack_require__(615);\n\nvar keyComponentRecordSetViewCtrl = {\n\tpage: null,\n\n\tinit: function init() {\n\t\tutil.translate('.page[data-page=\"keyComponentRecordSet\"]');\n\t\tthis.event();\n\t\tthis.retrunBtn();\n\t\tthis.searchBtn();\n\t\tthis.initWorkCenterData();\n\t\tthis.renderTimePicker();\n\t\tthis.renderStatus();\n\t\tthis.inputFormat();\n\n\t\tthis.initStationSlect();\n\t},\n\tevent: function event() {\n\t\tvar top = (window.innerHeight - 50 - 70) / 2 + 50 + \"px\";\n\t\t$(\".toggle-right-btn\", this.page).css(\"top\", top).on(\"click\", function (e) {\n\t\t\tmyApp.closePanel('right');\n\t\t});\n\t},\n\n\tretrunBtn: function retrunBtn() {\n\t\t$(\".btn-return\", this.page).on('click', function () {\n\t\t\tmyApp.closePanel('right');\n\t\t});\n\t},\n\n\tinputFormat: function inputFormat() {\n\t\t$('.text-upperCase', this.page).keyup(function (event) {\n\t\t\tthis.value = this.value.replace(/[^\\w\\.\\/]/ig, '');\n\t\t});\n\t},\n\n\tsearchBtn: function searchBtn() {\n\t\t$(\"[name='btnSearch']\", this.page).on('click', function () {\n\t\t\tvar formData = myApp.formToJSON('#keypartRecordSetForm');\n\t\t\tvar searchParam = {};\n\t\t\tsearchParam.workCenterCode = formData.workCenterCode || '';\n\t\t\tsearchParam.stationCode = formData.stationCode || '';\n\t\t\tsearchParam.productNum = formData.productNum || '';\n\t\t\tsearchParam.keypartCode = formData.keypartCode || '';\n\t\t\tsearchParam.kaypartText = formData.keypartText || '';\n\t\t\tsearchParam.supplierCode = formData.supplierCode || '';\n\t\t\tsearchParam.productId = formData.productId || '';\n\t\t\tsearchParam.lotNum = formData.lotNum || '';\n\t\t\tsearchParam.supplierText = formData.supplierText || '';\n\t\t\tsearchParam.scanStartTime = formData.scanTime.split(\" - \")[0] || '';\n\t\t\tsearchParam.scanEndTime = formData.scanTime.split(\" - \")[1] || '';\n\t\t\tsearchParam.statusECode = formData.statusECode.join(\",\") || '';\n\n\t\t\tsearchParam.siteCode = app.siteCode;\n\t\t\tsearchParam.serviceCode = \"GMES-CLIENT-KEYPART008\";\n\t\t\tmyApp.closePanel('right');\n\t\t\tkeyComponentRecordCtrl.reloadDatatableByParam(searchParam);\n\t\t});\n\t},\n\n\tinitWorkCenterData: function initWorkCenterData() {\n\t\tvar _this = this;\n\t\tutil.service('GMES-CLIENT-ANDON002', {}, null, function (response) {\n\t\t\tvar renderData = { allWorkCenterList: response.data };\n\t\t\tutil.tplManager(\"allWorkCenterListTpl_keypart\", renderData, \"allWorkCenterListRender_keypart\");\n\t\t\t$(\"#allWorkCenterListRender_keypart\", _this.page).dropkick({\n\t\t\t\tchange: function change() {\n\t\t\t\t\tvar value = $(\"#allWorkCenterListRender_keypart option:selected\", _this.page).val();\n\t\t\t\t\t_this.reInitStationSlect(value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\trenderTimePicker: function renderTimePicker() {\n\t\tapp.datetimeRender(\"input.datetime\", this.page);\n\t},\n\n\trenderStatus: function renderStatus() {\n\t\tapp.checkboxRender(\"input[name='statusECode']\", this.page);\n\t},\n\n\tinitStationSlect: function initStationSlect() {\n\t\t$(\"#stationListRender_keypart\", this.page).dropkick({\n\t\t\tchange: function change() {}\n\t\t});\n\t},\n\n\treInitStationSlect: function reInitStationSlect(workCenterCode) {\n\t\tvar _this = this;\n\t\tutil.service('GMES-CLIENT-ANDON003', {\n\t\t\tworkCenterCode: workCenterCode\n\t\t}, null, function (response) {\n\t\t\tvar stationListData = response.data;\n\t\t\tvar renderData = { stationList: stationListData };\n\t\t\t$(\"#stationListContainer_keypart\", _this.page).empty();\n\t\t\t$(\"#stationListContainer_keypart\", _this.page).html('<select class=\"form-select-control\" id=\"stationListRender_keypart\" name=\"stationCode\"><option value=\"\"></option></select>');\n\t\t\tutil.tplManager(\"stationListTpl_keypart\", renderData, \"stationListRender_keypart\");\n\t\t\t$(\"#stationListRender_keypart\", _this.page).dropkick({\n\t\t\t\tchange: function change() {}\n\t\t\t});\n\t\t});\n\t}\n};\n\nmodule.exports = keyComponentRecordSetViewCtrl;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// assets/js/pages/pqs_keyComponentRecord-set_4edf74a0dbc2ac0f2c3f.js","/*\r\n * @name: \\src\\js\\pages\\pqs\\keyComponentRecord.js\r\n * @author: EVUN前端组\r\n * @modify: kelichao\r\n * @update: 2017-06-13\r\n * @decript: 关重件档案\r\n * @url: http://git.evun.cn/GMES/GMES_CLIENT_PAD\r\n */\r\n\r\nvar util = require(\"util\");\r\nvar app = require(\"app\");\r\n\r\nvar keyComponentRecordCtrl = {\r\n    page : undefined,\r\n    datatableApi : undefined,\r\n    queryParam : {\r\n        serviceCode : \"GMES-CLIENT-KEYPART008\",\r\n        siteCode : app.siteCode,\r\n        workCenterCode : \"\",\r\n        stationCode : \"\",\r\n        productNum : \"\",\r\n        materialCode : \"\",\r\n        materialText : \"\",\r\n        supplierCode : \"\",\r\n        productId : \"\",\r\n        lotNum : \"\",\r\n        supplierText : \"\",\r\n        scanStartTime : \"\",\r\n        scanEndTime : \"\",\r\n        statusECodes : \"\"\r\n    },\r\n    statusText: undefined,\r\n    init: function() {\r\n        util.translate(\".page[data-page='keyComponentRecord']\");\r\n        // util.setBreadcrumb([i18next.t(\"关重件档案\")]);\r\n        util.setBreadcrumb([i18next.t(\"KEYPART.T.MENU_RECORD\")]);\r\n\r\n        this.statusText = {\r\n            \"success\": i18next.t(\"COMMON.T.SUCCESS\"),\r\n            \"exception\": i18next.t(\"COMMON.T.EXCEPTION\"),\r\n            \"missing\": i18next.t(\"COMMON.T.MISSING\")\r\n        };\r\n        this.loadPage();\r\n        this.event();\r\n    },\r\n    event: function(){\r\n        // 点击右侧按钮可弹出右侧查询栏\r\n        $(\".toggle-right-btn\",this.page).on(\"click\",function(){\r\n            Sweet.rightPanelView.router.loadPage(\"views/pqs/keyComponentRecord-set.html\");\r\n            myApp.openPanel(\"right\");\r\n        });\r\n    },\r\n    // 默认加载图表\r\n    loadPage : function(){\r\n        var _this = this;\r\n        var scrollY = (this.page.height-126);\r\n        // 调用封装好的dataTable实例化方法\r\n        this.datatableApi = util.dataTable($(\".table-panel table\",this.page),{\r\n            \"scrollY\": scrollY,\r\n            \"ordering\": false,\r\n            \"order\" : [],\r\n            \"ajax\" : {\r\n\r\n                serviceCode : \"GMES-CLIENT-KEYPART008\",\r\n                param : function(){\r\n                    return  _this.queryParam;\r\n                }\r\n            },\r\n            \"createdRow\": function( row, data){\r\n                if(data.statusEcode != 1) {\r\n                    $(row).addClass(\"error\");\r\n                }\r\n            },\r\n            \"columns\": [\r\n                {\r\n                    \"data\": \"id\",\r\n                    \"render\": function(data, type, row,meta) {\r\n                        return meta[\"settings\"][\"_iDisplayStart\"] + meta.row + 1;\r\n                    }\r\n                },\r\n                {\r\n                    \"data\": \"workCenterText\",\r\n                    \"name\": \"workCenterText\"\r\n                },\r\n                {\r\n                    \"data\": \"stationText\",\r\n                    \"name\": \"stationText\"\r\n                },\r\n                {\r\n                    \"data\": \"productNum\",\r\n                    \"name\": \"productNum\"\r\n                },\r\n                {\r\n                    \"data\": \"productId\",\r\n                    \"name\": \"productId\"\r\n                },\r\n                {\r\n                    \"data\": \"statusEcode\",\r\n                    \"name\": \"statusEcode\",\r\n                    \"render\": function(data, type, row){\r\n                        var statusText;\r\n                        var fontColor;\r\n                        switch (row.statusECode) {\r\n                            case \"2\":{\r\n                                // statusText = \"异常\";\r\n                                statusText = _this.statusText.exception;\r\n                                fontColor = \"#ef5362\";\r\n                                break;\r\n                            }\r\n                            case \"1\":{\r\n                                // statusText = \"成功\";\r\n                                statusText = _this.statusText.success;\r\n                                fontColor = \"#27c24c\";\r\n                                break;\r\n                            }\r\n                            default:\r\n                                // statusText = \"漏扫\";\r\n                                statusText = _this.statusText.missing;\r\n                                fontColor = \"#ffce54\";\r\n                        }\r\n                        return  \"<span style='color:\" + fontColor + \";'>\" + statusText + \"</span>\";\r\n                    }\r\n                },\r\n                {\r\n                    \"data\": \"keypartCode\",\r\n                    \"name\": \"keypartCode\"\r\n                },\r\n                {\r\n                    \"data\": \"keypartText\",\r\n                    \"name\": \"keypartText\"\r\n                },\r\n                {\r\n                    \"data\": \"supplierCode\",\r\n                    \"name\": \"supplierCode\"\r\n                },\r\n                {\r\n                    \"data\": \"supplierText\",\r\n                    \"name\": \"supplierText\"\r\n                },\r\n                {\r\n                    \"data\": \"lotNum\",\r\n                    \"name\": \"lotNum\"\r\n                }\r\n            ]\r\n        });\r\n    },\r\n    // 根据查询栏输入的查询参数重新加载图表\r\n    reloadDatatableByParam: function(param) {\r\n        this.queryParam = $.extend({},this.queryParam,param);\r\n        this.datatableApi.ajax.reload();\r\n    }\r\n};\r\n\r\nmodule.exports = keyComponentRecordCtrl;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/pages/pqs/keyComponentRecord.js","var app = require('app');\r\nvar util = require('util');\r\n\r\nvar keyComponentRecordCtrl = require('./keyComponentRecord');\r\n\r\nvar keyComponentRecordSetViewCtrl = {\r\n\tpage:null,\r\n\t// 初始化\r\n\tinit: function(){\r\n\t\tutil.translate('.page[data-page=\"keyComponentRecordSet\"]');\r\n\t\tthis.event();\r\n\t\tthis.retrunBtn();   //返回按钮\r\n\t\tthis.searchBtn();   //查询按钮\r\n\t\tthis.initWorkCenterData();  //渲染工作中心选择下拉框\r\n\t\tthis.renderTimePicker();  //渲染时间选择按钮输入框\r\n\t\tthis.renderStatus();   //渲染andon状态多选按钮\r\n        this.inputFormat();     // 产品标识、编码等输入框只能输入英文字母和数字,不能输入中文\r\n\r\n\t\tthis.initStationSlect();    //渲染站点选择下拉框--初始化时，渲染空的下拉框\r\n\t},\r\n\tevent: function () {\r\n\t\tvar top = ((window.innerHeight - 50 -70 )/2 + 50) + \"px\";\r\n\t\t$(\".toggle-right-btn\",this.page).css(\"top\",top).on(\"click\",function(e){\r\n\t\t\tmyApp.closePanel('right');\r\n\t\t})\r\n\t},\r\n\t//返回按钮\r\n\tretrunBtn: function(){\r\n\t\t// 点击返回按钮，因此侧边栏\r\n\t\t$(\".btn-return\",this.page).on('click',function(){\r\n\t\t\tmyApp.closePanel('right');\r\n\t\t});\r\n\t},\r\n    // 只能输入英文字母和数字,不能输入中文\r\n    inputFormat: function () {\r\n        $('.text-upperCase',this.page).keyup(function(event){\r\n            this.value = this.value.replace(/[^\\w\\.\\/]/ig,'');      //只能输入英文字母和数字,不能输入中文\r\n        });\r\n    },\r\n\t//查询按钮\r\n\tsearchBtn: function(){\r\n\t\t// 点击查询按钮，取得表单的输入值，然后调用andon台账重新渲染的方法\r\n\t\t$(\"[name='btnSearch']\",this.page).on('click',function(){\r\n\t\t\tvar formData = myApp.formToJSON('#keypartRecordSetForm');\r\n\t\t\tvar searchParam = {};\r\n            searchParam.workCenterCode = formData.workCenterCode || '';\r\n            searchParam.stationCode = formData.stationCode || '';\r\n            searchParam.productNum = formData.productNum || '';\r\n            searchParam.keypartCode = formData.keypartCode || '';\r\n            searchParam.kaypartText = formData.keypartText || '';\r\n            searchParam.supplierCode = formData.supplierCode || '';\r\n            searchParam.productId = formData.productId || '';\r\n            searchParam.lotNum = formData.lotNum || '';\r\n            searchParam.supplierText = formData.supplierText || '';\r\n            searchParam.scanStartTime = formData.scanTime.split(\" - \")[0] || '';\r\n            searchParam.scanEndTime = formData.scanTime.split(\" - \")[1] || '';\r\n            searchParam.statusECode = formData.statusECode.join(\",\") || '';\r\n\r\n            searchParam.siteCode = app.siteCode;\r\n            searchParam.serviceCode = \"GMES-CLIENT-KEYPART008\";\r\n\t\t\tmyApp.closePanel('right');\r\n            keyComponentRecordCtrl.reloadDatatableByParam(searchParam);\r\n\t\t});\r\n\t},\r\n\t//渲染工作中心选择下拉框\r\n\tinitWorkCenterData: function(){\r\n\t\tvar _this = this;\r\n\t\tutil.service('GMES-CLIENT-ANDON002',{\r\n\t\t},null,function(response){\r\n\t\t\tvar renderData = { allWorkCenterList : response.data };\r\n\t\t\tutil.tplManager(\"allWorkCenterListTpl_keypart\", renderData, \"allWorkCenterListRender_keypart\");\r\n\t\t\t$(\"#allWorkCenterListRender_keypart\",_this.page).dropkick({\r\n\t\t\t\t// 根据新选择的工作中心，查询站点\r\n\t\t\t\tchange : function () {\r\n\t\t\t\t\tvar value = $(\"#allWorkCenterListRender_keypart option:selected\",_this.page).val();\r\n\t\t\t\t\t_this.reInitStationSlect(value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\t//渲染时间选择按钮输入框\r\n\trenderTimePicker: function(){\r\n\t\tapp.datetimeRender(\"input.datetime\",this.page);\r\n\t},\r\n\t// 渲染andon状态多选按钮\r\n\trenderStatus: function () {\r\n\t\tapp.checkboxRender(\"input[name='statusECode']\",this.page);\r\n\t},\r\n\t//渲染站点选择下拉框--初始化时，渲染空的下拉框\r\n\tinitStationSlect: function () {\r\n\t\t$(\"#stationListRender_keypart\",this.page).dropkick({\r\n\t\t\tchange : function () {}\r\n\t\t});\r\n\t},\r\n\t//重新渲染站点选择下拉框--根据工作中心查询\r\n\treInitStationSlect: function (workCenterCode) {\r\n\t\tvar _this = this;\r\n\t\tutil.service('GMES-CLIENT-ANDON003',{\r\n\t\t\tworkCenterCode: workCenterCode\r\n\t\t},null,function(response){\r\n\t\t\tvar stationListData = response.data;\r\n\t\t\tvar renderData = { stationList : stationListData };\r\n\t\t\t$(\"#stationListContainer_keypart\",_this.page).empty();\r\n\t\t\t$(\"#stationListContainer_keypart\",_this.page).html('<select class=\"form-select-control\" id=\"stationListRender_keypart\" name=\"stationCode\"><option value=\"\"></option></select>');\r\n\t\t\tutil.tplManager(\"stationListTpl_keypart\", renderData, \"stationListRender_keypart\");\r\n\t\t\t$(\"#stationListRender_keypart\",_this.page).dropkick({\r\n\t\t\t\tchange : function () {}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n\r\nmodule.exports = keyComponentRecordSetViewCtrl\r\n/*\r\nmyApp.onPageInit('keyComponentRecordSet', function (page) {\r\n\tutil.translate('.page[data-page=\"keyComponentRecordSet\"]');\r\n\tkeyComponentRecordSetView.init($(page.container));\r\n});*/\n\n\n// WEBPACK FOOTER //\n// ./src/js/pages/pqs/keyComponentRecord-set.js"],"sourceRoot":""}