webpackJsonp([10,36],{614:function(e,t,n){"use strict";(function(t,a){var i=n(35),r=n(34),o={page:void 0,datatableApi:void 0,queryParam:{serviceCode:"GMES-CLIENT-ANDON005",workCenterCode:"",stationCode:"",typeCode:"",statusECode:"",minSwitchOnDateTime:"",maxSwitchOnDateTime:""},init:function(){t(document).off("keydown"),r.setBreadcrumb([a.t("ANDON.T.MENU_ANDONRUNLOG")]),this.loadPage(),r.translate('.page[data-page="andonLog"]'),this.event()},event:function(){t(".toggle-right-btn").on("click",function(e){Sweet.rightPanelView.router.loadPage("views/andon/andonLog-set.html"),myApp.openPanel("right")})},loadPage:function(){var e=this,n=this.page.height-126;this.datatableApi=r.dataTable(t(".table-panel table",this.page),{scrollY:n,ordering:!1,order:[],ajax:{serviceCode:"GMES-CLIENT-ANDON005",param:function(){return e.queryParam}},columns:[{data:"id",render:function(e,t,n,a){return a.settings._iDisplayStart+a.row+1}},{data:"workCenterText",name:"workCenterText"},{data:"stationText",name:"stationText"},{data:"typeText",name:"typeText"},{name:"statusECode",width:"65px",render:function(e,t,n){var i,r;switch(n.statusECode){case"1":i=a.t("ANDON.T.STATUS_TOUCH"),r="#ef5362";break;case"3":i=a.t("ANDON.T.STATUS_CLOSE"),r="#ffce54";break;default:i="чбошод",r="#27c24c"}return'<span style="padding:5px 15px;background:'+r+';border-radius:15px;">'+i+"</span>"}},{name:"triggerTime",render:function(e,t,n){var r=Math.abs((n.switchOffDateTime||i.getServerDateTime())-n.switchOnDateTime)/1e3;return function(e){var t=parseInt(e),n=0,i=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(i=parseInt(n/60),n=parseInt(n%60))),a.t("COMMON.T.TIME",{hour:parseInt(i),minute:parseInt(n),second:parseInt(t)})}(r)}},{data:"switchOnDateTime",name:"switchOnDateTime",render:function(e,t,n){return function(e){function t(e){return parseInt(e)<10&&(e="0"+e),e}var n=new Date(e),a=n.getFullYear(),i=n.getMonth()+1,r=n.getDate(),o=n.getHours(),s=n.getMinutes(),c=n.getSeconds();return a+"-"+t(i)+"-"+t(r)+" "+t(o)+":"+t(s)+":"+t(c)}(e)}},{data:"switchOnUser",name:"switchOnUser"},{data:"memo",name:"memo"}]})},reloadDatatableByParam:function(e){this.queryParam=t.extend({},this.queryParam,e),this.datatableApi.ajax.reload()}};e.exports=o}).call(t,n(4),n(37))},619:function(e,t,n){"use strict";(function(t,a){var i=n(34),r=n(614),o={init:function(){t(document).off("keydown"),this.event(),this.retrunBtn(),this.searchBtn(),this.initWorkCenterData(),this.renderTimePicker(),this.renderAndonStatus(),this.initStationSlect(),this.renderAndonType(),i.translate('.page[data-page="andonLogSet"]')},event:function(){var e=(window.innerHeight-50-70)/2+50+"px";t(".toggle-right-btn",this.page).css("top",e).on("click",function(e){myApp.closePanel("right")})},retrunBtn:function(){t(".btn-return",this.page).on("click",function(){myApp.closePanel("right")})},searchBtn:function(){t("[name='btnSearch']",this.page).on("click",function(){var e=myApp.formToJSON("#andonSetForm"),t={};console.log(e),t.workCenterCode=e.workCenterCode,t.stationCode=e.stationCode,e.typeCode&&(t.typeCode=e.typeCode.join(",")),t.statusECode=e.statusECode.join(","),t.minSwitchOnDateTime=e.SwitchOnDateTime.split(" - ")[0],t.maxSwitchOnDateTime=e.SwitchOnDateTime.split(" - ")[1],t.minSwitchOffDateTime=e.SwitchOffDateTime.split(" - ")[0],t.maxSwitchOffDateTime=e.SwitchOffDateTime.split(" - ")[1],myApp.closePanel("right"),r.reloadDatatableByParam(t)})},initWorkCenterData:function(){var e=this;i.service("GMES-CLIENT-ANDON002",{},null,function(n){var a={allWorkCenterList:n.data};i.tplManager("allWorkCenterListTpl",a,"allWorkCenterListRender"),t("#allWorkCenterListRender",e.page).dropkick({change:function(){var n=t("#allWorkCenterListRender option:selected",e.page).val();e.reInitStationSlect(n)}})})},renderTimePicker:function(){a.datetimeRender("input.datetime",this.page)},renderAndonStatus:function(){a.checkboxRender("input[name='statusECode']",this.page)},initStationSlect:function(){t("#stationListRender",this.page).dropkick({change:function(){}})},reInitStationSlect:function(e){var n=this;i.service("GMES-CLIENT-ANDON003",{workCenterCode:e},null,function(e){var a=e.data,r={stationList:a};t("#stationListContainer",n.page).empty(),t("#stationListContainer",n.page).html('<select class="form-select-control" id="stationListRender" name="stationCode"><option value=""></option></select>'),i.tplManager("stationListTpl",r,"stationListRender"),t("#stationListRender",n.page).dropkick({change:function(){var e=t("#stationListRender option:selected",n.page).val();n.renderAndonType(e)}})})},renderAndonType:function(e){function n(e){t("#andonTypeRender").empty();for(var n=e.length,o=0;o<n;o++)e[o].typeText=e[o].typeText.substring(0,2);var s=0,c=[];do{var d={};0==s&&(d.showLabel=!0);var p=e.length;e.length>3?d.TypeGroup=e.splice(0,3):d.TypeGroup=e.splice(0,p),s++,c.push(d)}while(e.length>0);var l={allTypeGroup:c};i.tplManager("andonTypeTpl",l,"andonTypeRender"),a.checkboxRender("input[name='typeCode']",r.page)}var r=this;i.service("GMES-CLIENT-ANDON004",{},null).done(function(e){n(e.data)})}};e.exports=o}).call(t,n(4),n(77))}});
//# sourceMappingURL=andon_andonLog-set_4beeeb57d7c5a46a5a22.js.map