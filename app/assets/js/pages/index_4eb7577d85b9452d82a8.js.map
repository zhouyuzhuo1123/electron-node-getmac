{"version":3,"sources":["webpack:///assets/js/pages/index_4eb7577d85b9452d82a8.js","webpack:///./src/js/pages/index.js"],"names":["webpackJsonp","624","module","exports","__webpack_require__","$","app","notie","_keys","_keys2","obj","__esModule","default","Sortable","util","security","indexCtrl","init","setBreadcrumb","this","navMenu","event","menuHotKeyEvent","translate","refresh","changeClass","number","index","eq","addClass","domList","removeClass","document","on","e","keyCode","$$","trigger","getData","completeEdit","render","getUserAllModuleMenus","datas","_this","data","length","collectionModules","localCollectionModule","getCollectionModules","favorMenu","undefined","each","key","menu","child","children","subMenuIndex","subMenu","menuData","menuCode","push","Sweet","tpl","tplElement","renderElement","window","quickSortFavor","option","delFavor","quickStart","sortable","editFavor","floatMenu","runningModel","active","el","sortFavorObj","sortFavor","favorElemet","find","parents","reLoad","modules","prop","value","moduleCode","moduleGroupCode","moduleType","myApp","popup","item","console","log","post","hasClass","checkFavor","formToJSON","homeFavor","quickStartFavor","infos","split","closeModal","self","parentBox","setTimeout","attr","remove","currentModules","reLoadAble","notPushAble","css","clear","getElementById","create","animation","handle","disabled","hotkeysBind","page","mainView","router","load","url","keydown","activePage","hotIndex","isNum","isSmallNum","menus","alert","text","off","removeHotMenu","parseQueryString","reg_url","reg_para","arr_url","exec","ret","result","str_para","call"],"mappings":"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","file":"assets/js/pages/index_4eb7577d85b9452d82a8.js","sourcesContent":["webpackJsonp([32],{\n\n/***/ 624:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($, app, notie) {\n\nvar _keys = __webpack_require__(115);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Sortable = __webpack_require__(122);\nvar util = __webpack_require__(34);\nvar security = __webpack_require__(35);\nvar indexCtrl = {\n    init: function init() {\n        util.setBreadcrumb([]);\n        this.navMenu.init();\n        this.event();\n        this.menuHotKeyEvent();\n\n        util.translate(\".page[data-page='home']\");\n    },\n    refresh: function refresh() {\n        this.navMenu.refresh();\n    },\n    event: function event() {\n        var domList = $(\".tests\");\n\n\n        function changeClass(number) {\n            var index = $(\".tests\").index($('.selected-btn'));\n\n            if (index === -1) {\n                $(\".tests\").eq(0).addClass(\"selected-btn\");\n                return;\n            }\n            domList.removeClass('selected-btn');\n\n            domList.eq(index + number).addClass('selected-btn');\n        }\n\n        $(document).on(\"keydown\", function (e) {\n\n            if (e.keyCode == 37) {\n                changeClass(-1);\n            }\n            if (e.keyCode == 39) {\n                changeClass(1);\n            }\n            if (e.keyCode == 38) {\n                changeClass(-4);\n            }\n            if (e.keyCode == 40) {\n                changeClass(4);\n            }\n            if (e.keyCode == 13) {\n                $$('.selected-btn a').eq(0).trigger(\"click\");\n            }\n        });\n    },\n    navMenu: {\n        init: function init() {\n            this.getData();\n            this.completeEdit();\n        },\n        getData: function getData() {\n            this.render(null, security.getUserAllModuleMenus());\n        },\n        render: function render(refresh, datas) {\n            var _this = this;\n            var data = security.getUserAllModuleMenus();\n\n            data = (0, _keys2.default)(data).length === 0 ? datas : data;\n\n            var collectionModules = indexCtrl.localCollectionModule.getCollectionModules();\n            var favorMenu = [];\n\n            if (collectionModules !== undefined) {\n                $.each(collectionModules, function (key, module) {\n                    $.each(data.navMenu, function (key, menu) {\n                        var child = menu.children;\n\n                        if (child) {\n                            $.each(child, function (subMenuIndex, subMenu) {\n                                var menuData = subMenu.data;\n\n                                if (menuData.menuCode == module.menuCode) {\n                                    favorMenu.push(menuData);\n                                }\n                            });\n                        }\n                    });\n                });\n\n                data.favorMenu = favorMenu;\n            }\n\n            Sweet.tpl({\n                tplElement: \"#quickStartMenuTpl\",\n                renderElement: \"#quickStartMenus\",\n                data: data\n            });\n\n            $(\"#setFavorBtn\").on(\"click\", function () {\n                $(\".nav-menu-box\").addClass(\"hide\");\n                $(\".quick-start-menus\").addClass(\"show-flex\");\n                $(\"#quickStartFavor\").addClass(\"on\");\n                window.quickSortFavor.option(\"disabled\", false);\n            });\n\n            _this.delFavor();\n\n            indexCtrl.quickStart.sortable();\n\n            if (!refresh) {\n                _this.editFavor();\n            }\n\n            indexCtrl.navMenu.floatMenu();\n            indexCtrl.quickStart.floatMenu();\n\n            app.runningModel.active(\"#quickStartMenus\");\n        },\n\n        floatMenu: function floatMenu(el, sortFavorObj) {\n\n            el = el ? el : \"#indexFavor\";\n            sortFavorObj = sortFavorObj ? sortFavorObj : window.sortFavor;\n\n            var favorElemet = $(el);\n\n            favorElemet.find(\".edit-favor\").on(\"click\", function () {\n                sortFavorObj.option(\"disabled\", false);\n                var speedDial = $(this).parents(\".speed-dial\");\n                speedDial.removeClass(\"speed-dial-opened\");\n                favorElemet.addClass(\"on\");\n            });\n\n            favorElemet.find(\".add-favor\").on(\"click\", function () {\n                indexCtrl.localCollectionModule.reLoad();\n                var modules = indexCtrl.localCollectionModule.getCollectionModules();\n\n                $(\"input[name='checkFavor']\").prop(\"checked\", false);\n                var value = null;\n                $.each(modules, function (index, module) {\n                    value = module.menuCode + \"||\" + module.moduleCode + \"||\" + module.moduleGroupCode + \"||\" + module.moduleType;\n\n                    $(\"input[name='checkFavor'][value='\" + value + \"']\").prop(\"checked\", true);\n                });\n\n                myApp.popup(\".popup-selectFavorMenu\");\n\n                var speedDial = $$(this).parents(\".speed-dial\");\n                speedDial.removeClass(\"speed-dial-opened\");\n            });\n        },\n\n        completeEdit: function completeEdit() {\n            $(\".edit-favor-complete\").on(\"click\", function () {\n                indexCtrl.localCollectionModule.reLoad();\n\n                var data = {};\n\n                $.each(indexCtrl.localCollectionModule.getCollectionModules(), function (index, item) {\n                    $.each(item, function (key, value) {\n                        data[\"userCollectionList[\" + index + \"].\" + key] = value;\n                    });\n                });\n                console.log(data);\n\n                util.post(\"restful/userCollection/resetUserCollections\", data, \"保存模块调整信息\", function () {\n                    $(\".favor-menu\").removeClass(\"on\");\n                    window.quickSortFavor.option(\"disabled\", true);\n\n                    if ($(this).hasClass(\"quick-favor-complete\")) {\n                        $(\".nav-menu-box\").removeClass(\"hide\");\n                        $(\".quick-start-menus\").removeClass(\"show-flex\");\n                    }\n\n                    indexCtrl.navMenu.refresh();\n                });\n            });\n        },\n\n        editFavor: function editFavor() {\n            $(\".add-favor-ok\").on(\"click\", function () {\n                var checkFavor = myApp.formToJSON(\"#checkFavorForm\").checkFavor;\n                var homeFavor = $$(\"#indexFavor\");\n                var quickStartFavor = $$(\"#quickStartFavor\");\n                var modules = [];\n                var infos = [];\n\n                $.each(checkFavor, function (index, item) {\n                    infos = item.split(\"||\");\n                    modules.push({\n                        \"menuCode\": infos[0],\n                        \"moduleCode\": infos[1],\n                        \"moduleGroupCode\": infos[2],\n                        \"moduleType\": infos[3]\n                    });\n                });\n\n                indexCtrl.localCollectionModule.push(modules, true);\n\n                indexCtrl.navMenu.refresh();\n\n                homeFavor.addClass(\"on\");\n                quickStartFavor.addClass(\"on\");\n\n                window.quickSortFavor.option(\"disabled\", false);\n\n                myApp.closeModal(\".popup-selectFavorMenu\");\n            });\n\n            $(\".add-favor-cancel\").on(\"click\", function () {\n                myApp.closeModal(\".popup-selectFavorMenu\");\n            });\n        },\n\n        delFavor: function delFavor() {\n\n            $(\".del-favor\").on(\"click\", function () {\n                var self = $$(this),\n                    parentBox = self.parents(\".quick-menu-item-box\");\n                parentBox.addClass(\"remove\");\n                setTimeout(function () {\n                    $(\".quick-menu-item-box[favor-id='\" + parentBox.attr(\"favor-id\") + \"']\").remove();\n                }, 300);\n            });\n        },\n        refresh: function refresh() {\n            this.render(\"refresh\");\n        }\n    },\n\n    localCollectionModule: {\n        currentModules: undefined,\n\n        push: function push(modules, reLoadAble) {\n            var _this = this;\n            if (reLoadAble === true) {\n                this.reLoad();\n            }\n\n            var notPushAble = false;\n            if ($(\".popup-quickStart\").css(\"display\") == \"none\") {\n                $.each(modules, function (index, item) {\n\n                    notPushAble = false;\n\n                    $.each(_this.currentModules, function (index, module) {\n                        if (module.menuCode === item.menuCode) {\n                            notPushAble = true;\n                        }\n                    });\n\n                    if (!notPushAble) {\n                        _this.currentModules.push(item);\n                    }\n                });\n            } else {\n                $.each(modules, function (index, item) {\n                    notPushAble = false;\n\n                    $.each(_this.currentModules, function (index, module) {\n                        if (module.menuCode === item.menuCode) {\n                            notPushAble = true;\n                        }\n                    });\n\n                    if (!notPushAble) {\n                        _this.currentModules.push(item);\n                    }\n                });\n            }\n        },\n\n        clear: function clear() {\n            this.currentModules = undefined;\n        },\n\n        reLoad: function reLoad() {\n            var _this = this;\n            this.currentModules = [];\n            if ($(\".popup-quickStart\").css(\"display\") == \"none\") {\n                $.each($(\"#quickMenusRender\").children(\".quick-menu-item-box\"), function (index, item) {\n                    _this.currentModules.push({\n                        \"menuCode\": $(item).attr(\"favor-id\"),\n                        \"moduleCode\": $(item).attr(\"data-module-code\"),\n                        \"moduleGroupCode\": $(item).attr(\"data-module-group-code\"),\n                        \"moduleType\": $(item).attr(\"data-module-type\")\n                    });\n                });\n            } else {\n                $.each($(\"#quickStartMenus\").children(\".quick-menu-item-box\"), function (index, item) {\n                    _this.currentModules.push({\n                        \"menuCode\": $(item).attr(\"favor-id\"),\n                        \"moduleCode\": $(item).attr(\"data-module-code\"),\n                        \"moduleGroupCode\": $(item).attr(\"data-module-group-code\"),\n                        \"moduleType\": $(item).attr(\"data-module-type\")\n                    });\n                });\n            }\n        },\n\n        getCollectionModules: function getCollectionModules() {\n            return this.currentModules;\n        }\n    },\n\n    quickStart: {\n        floatMenu: function floatMenu() {\n            indexCtrl.navMenu.floatMenu(\"#quickStartFavor\", window.quickSortFavor);\n        },\n        sortable: function sortable() {\n            if (document.getElementById(\"quickStartMenus\")) {\n                var el = document.getElementById(\"quickStartMenus\");\n                window.quickSortFavor = Sortable.create(el, {\n                    animation: 100,\n                    handle: \".favor-move\",\n                    disabled: true\n                });\n            }\n        }\n    },\n\n    menuHotKeyEvent: function menuHotKeyEvent() {\n        util.hotkeysBind(\"keydown\", \"return\", function () {\n            var menu = $(\".quick-menu-item-inner:eq(0)\", this.page);\n            if (menu && menu.length > 0) {\n                Sweet.mainView.router.load({\n                    url: menu.attr(\"data-url\")\n                });\n            }\n        });\n\n        $(document).keydown(function (event) {\n\n            if (Sweet.mainView.activePage.url === \"views/index.html\") {\n                var keyCode = event.keyCode;\n                var hotIndex;\n                var isNum = keyCode >= 48 && keyCode <= 57;\n                var isSmallNum = keyCode >= 96 && keyCode <= 105;\n\n                if (isNum || isSmallNum) {\n                    if (keyCode === 48 || keyCode === 96) {\n                        hotIndex = 10;\n                    } else if (keyCode > 48 && keyCode <= 57) {\n                        hotIndex = keyCode - 48;\n                    } else {\n                        hotIndex = keyCode - 96;\n                    }\n                } else {\n                    return;\n                }\n\n                var menus = $(\".quick-menu-item-inner\");\n                var menusLen = menus.length;\n                if (hotIndex > menusLen) {\n                    notie.alert({ text: \"你所按快捷键序号超过菜单数！\" });\n                } else {\n                    $(document).off(\"keydown\");\n                    Sweet.mainView.router.load({\n                        url: \"views/\" + menus.eq(hotIndex - 1).attr(\"data-url\")\n                    });\n                }\n            }\n        });\n    },\n\n    removeHotMenu: function removeHotMenu() {\n        $(document).off(\"keydown\");\n    },\n    parseQueryString: function parseQueryString(url) {\n        var reg_url = /^[^\\?]+\\?([\\w\\W]+)$/,\n            reg_para = /([^&=]+)=([\\w\\W]*?)(&|$|#)/g,\n            arr_url = reg_url.exec(url),\n            ret = {};\n        if (arr_url && arr_url[1]) {\n            var str_para = arr_url[1],\n                result;\n            while ((result = reg_para.exec(str_para)) !== null) {\n                ret[result[1]] = result[2];\n            }\n        }\n        return ret;\n    }\n};\n\nmodule.exports = indexCtrl;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(77), __webpack_require__(36)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// assets/js/pages/index_4eb7577d85b9452d82a8.js","/*\r\n * @name: \\src\\index.js\r\n * @author: EVUN前端组\r\n * @modify: kelichao\r\n * @update: 2017-06-13\r\n * @decript: 首页\r\n * @url: http://git.evun.cn/GMES/GMES_CLIENT_PAD\r\n */\r\n\r\nvar Sortable = require(\"Sortable\");\r\nvar util = require(\"util\");\r\nvar security = require(\"security\");\r\nvar indexCtrl = {\r\n    init: function () {\r\n        util.setBreadcrumb([]);// 清楚标题\r\n        this.navMenu.init();\r\n        this.event();\r\n        this.menuHotKeyEvent();\r\n\r\n        // 国际化：在初始化那块拿过来的\r\n        util.translate(\".page[data-page='home']\");\r\n    },\r\n    refresh: function () {\r\n        this.navMenu.refresh();\r\n    },\r\n    event: function () {\r\n        \r\n        //键盘监听事件\r\n        var domList = $(\".tests\");\r\n        // var height = domList.height();\r\n        // var parentHeight = $(window).height() - 130;\r\n        // var moveHeight = Math.floor(parentHeight / height) - 1;\r\n\r\n        function changeClass(number) {\r\n            var index = $(\".tests\").index($('.selected-btn'));\r\n\r\n            if (index === -1 ) {\r\n                $(\".tests\").eq(0).addClass(\"selected-btn\");\r\n                return;\r\n            }\r\n            domList.removeClass('selected-btn');\r\n\r\n            domList.eq(index + number).addClass('selected-btn');\r\n        }\r\n\r\n        $(document).on(\"keydown\", function (e) {\r\n\r\n            if (e.keyCode == 37) {\r\n                changeClass(-1); //left\r\n            }\r\n            if (e.keyCode == 39) {\r\n                changeClass(1); //right\r\n            }\r\n            if (e.keyCode == 38) {\r\n                changeClass(-4); //up\r\n            }\r\n            if (e.keyCode == 40) {\r\n                changeClass(4);\r\n            }\r\n            if (e.keyCode == 13) {\r\n                $$('.selected-btn a').eq(0).trigger(\"click\");\r\n            }\r\n        });\r\n    },\r\n    navMenu: {\r\n        init: function () {\r\n            this.getData();\r\n            this.completeEdit();\r\n        },\r\n        getData: function () {\r\n            this.render(null, security.getUserAllModuleMenus());\r\n        },\r\n        render: function (refresh, datas) {\r\n            var _this = this;\r\n            var data = security.getUserAllModuleMenus();\r\n            // console.log(data.favorMenu);\r\n            data = (Object.keys(data).length === 0) ? datas : data;\r\n\r\n            /* \r\n             * 获取收藏的模块信息集合\r\n             * 内容为：[{menuCode:\"IP_COLLECT\",moduleCode:\"IP_COLLECT\",moduleGroupCode:\"PQS\",moduleType:\"0\"}]\r\n             */\r\n            var collectionModules = indexCtrl.localCollectionModule.getCollectionModules();\r\n            var favorMenu = [];\r\n\r\n            if (collectionModules !== undefined) {\r\n\r\n                // 收藏模块有过调整,则以调整的为基准\r\n                $.each(collectionModules, function (key, module) {\r\n\r\n                    /* \r\n                     * 遍历每个大目录\r\n                     * data: {favorMenu:[],navMenu:[]} \r\n                     * 收藏细目录：favorMenu\r\n                     * 收藏大目录： navMenu\r\n                     */\r\n                    $.each(data.navMenu, function (key, menu) {\r\n                        var child = menu.children;\r\n\r\n                        // 如果有细目录\r\n                        if (child) {\r\n\r\n                            // 遍历细目录\r\n                            $.each(child, function (subMenuIndex, subMenu) {\r\n                                var menuData = subMenu.data;\r\n\r\n                                if (menuData.menuCode == module.menuCode) {\r\n\r\n                                    // 查找最新菜单中对应菜单编码一致的元素\r\n                                    favorMenu.push(menuData);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n\r\n                data.favorMenu = favorMenu;\r\n            }\r\n\r\n            // 新型渲染方式，放在了sweet内部\r\n            Sweet.tpl({\r\n                tplElement: \"#quickStartMenuTpl\",\r\n                renderElement: \"#quickStartMenus\",\r\n                data: data\r\n            });\r\n\r\n            // 手机端个人收藏设置按钮\r\n            $(\"#setFavorBtn\").on(\"click\", function () {\r\n                $(\".nav-menu-box\").addClass(\"hide\");\r\n                $(\".quick-start-menus\").addClass(\"show-flex\");\r\n                $(\"#quickStartFavor\").addClass(\"on\");\r\n                window.quickSortFavor.option(\"disabled\", false);\r\n            });\r\n\r\n            _this.delFavor();\r\n\r\n            indexCtrl.quickStart.sortable();\r\n\r\n            if (!refresh) {\r\n                _this.editFavor();\r\n            }\r\n\r\n            indexCtrl.navMenu.floatMenu();\r\n            indexCtrl.quickStart.floatMenu();\r\n\r\n            // 监听点击，添加到正在运行中\r\n            app.runningModel.active(\"#quickStartMenus\");\r\n        },\r\n        // 浮动按钮\r\n        floatMenu: function (el, sortFavorObj) {\r\n\r\n            el = el ? el : \"#indexFavor\";\r\n            sortFavorObj = sortFavorObj ? sortFavorObj : window.sortFavor;\r\n\r\n            var favorElemet = $(el);\r\n\r\n            favorElemet.find(\".edit-favor\").on(\"click\", function () {\r\n                sortFavorObj.option(\"disabled\", false);\r\n                var speedDial = $(this).parents(\".speed-dial\");\r\n                speedDial.removeClass(\"speed-dial-opened\");\r\n                favorElemet.addClass(\"on\");\r\n            });\r\n\r\n            favorElemet.find(\".add-favor\").on(\"click\", function () {\r\n\r\n                //新增时需读取最新的收藏信息用于控制模块的复选框信息\r\n                indexCtrl.localCollectionModule.reLoad();\r\n                var modules = indexCtrl.localCollectionModule.getCollectionModules();\r\n\r\n                $(\"input[name='checkFavor']\").prop(\"checked\", false);\r\n                var value = null;\r\n                $.each(modules, function (index, module) {\r\n                    value = module.menuCode +\r\n                        \"||\" + module.moduleCode +\r\n                        \"||\" + module.moduleGroupCode +\r\n                        \"||\" + module.moduleType;\r\n\r\n                    $(\"input[name='checkFavor'][value='\" + value + \"']\").prop(\"checked\", true);\r\n                });\r\n\r\n                myApp.popup(\".popup-selectFavorMenu\");\r\n\r\n                var speedDial = $$(this).parents(\".speed-dial\");\r\n                speedDial.removeClass(\"speed-dial-opened\");\r\n\r\n            });\r\n        },\r\n        // 完成编辑\r\n        completeEdit: function () {\r\n            $(\".edit-favor-complete\").on(\"click\", function () {\r\n\r\n                //由于添加完菜单之后还会有删除操作，所以需要重新加载一遍数据\r\n                indexCtrl.localCollectionModule.reLoad();\r\n\r\n                var data = {};\r\n\r\n                $.each(indexCtrl.localCollectionModule.getCollectionModules(), function (index, item) {\r\n                    $.each(item, function (key, value) {\r\n                        data[\"userCollectionList[\" + index + \"].\" + key] = value;\r\n                    });\r\n                });\r\n                console.log(data);\r\n\r\n                util.post(\"restful/userCollection/resetUserCollections\", data, \"保存模块调整信息\", function () {\r\n                    $(\".favor-menu\").removeClass(\"on\");\r\n                    window.quickSortFavor.option(\"disabled\", true);\r\n\r\n                    if ($(this).hasClass(\"quick-favor-complete\")) {\r\n                        $(\".nav-menu-box\").removeClass(\"hide\");\r\n                        $(\".quick-start-menus\").removeClass(\"show-flex\");\r\n                    }\r\n\r\n                    indexCtrl.navMenu.refresh();\r\n                });\r\n\r\n\r\n            });\r\n        },\r\n        // 编辑收藏事件\r\n        editFavor: function () {\r\n            $(\".add-favor-ok\").on(\"click\", function () {\r\n                var checkFavor = myApp.formToJSON(\"#checkFavorForm\").checkFavor;\r\n                var homeFavor = $$(\"#indexFavor\");\r\n                var quickStartFavor = $$(\"#quickStartFavor\");\r\n                var modules = [];\r\n                var infos = [];\r\n\r\n                //获取喜欢的功能模块先并保存至本地\r\n                $.each(checkFavor, function (index, item) {\r\n                    infos = item.split(\"||\");\r\n                    modules.push({\r\n                        \"menuCode\": infos[0],\r\n                        \"moduleCode\": infos[1],\r\n                        \"moduleGroupCode\": infos[2],\r\n                        \"moduleType\": infos[3]\r\n                    });\r\n                });\r\n\r\n                indexCtrl.localCollectionModule.push(modules, true);\r\n\r\n                indexCtrl.navMenu.refresh();\r\n\r\n                homeFavor.addClass(\"on\");\r\n                quickStartFavor.addClass(\"on\");\r\n\r\n                window.quickSortFavor.option(\"disabled\", false);\r\n\r\n                myApp.closeModal(\".popup-selectFavorMenu\");\r\n            });\r\n\r\n\r\n            $(\".add-favor-cancel\").on(\"click\", function () {\r\n                myApp.closeModal(\".popup-selectFavorMenu\");\r\n            });\r\n\r\n        },\r\n        // 删除收藏\r\n        delFavor: function () {\r\n\r\n            $(\".del-favor\").on(\"click\", function () {\r\n                var self = $$(this),\r\n                    parentBox = self.parents(\".quick-menu-item-box\");\r\n                parentBox.addClass(\"remove\");\r\n                setTimeout(function () {\r\n                    //将主面板和编辑页面的都删除\r\n                    $(\".quick-menu-item-box[favor-id='\" + parentBox.attr(\"favor-id\") + \"']\").remove();\r\n                    //parentBox.remove();\r\n                }, 300);\r\n            });\r\n        },\r\n        refresh: function () {\r\n            this.render(\"refresh\");\r\n        }\r\n    },\r\n    //本地收藏模块信息缓存操作\r\n    localCollectionModule: {\r\n        currentModules: undefined,\r\n        // 新增收藏的模块\r\n        push: function (modules, reLoadAble) {\r\n            var _this = this;\r\n            if (reLoadAble === true) {\r\n                this.reLoad();\r\n            }\r\n\r\n            var notPushAble = false;\r\n            if ($(\".popup-quickStart\").css(\"display\") == \"none\") {\r\n                //获取喜欢的功能模块先并保存至本地\r\n                $.each(modules, function (index, item) {\r\n\r\n                    notPushAble = false;\r\n                    //遍历现已存在的模块\r\n                    $.each(_this.currentModules, function (index, module) {\r\n                        if (module.menuCode === item.menuCode) {\r\n                            //如果已经存在则不做PUSH操作\r\n                            notPushAble = true;\r\n                        }\r\n                    });\r\n\r\n                    if (!notPushAble) {\r\n                        _this.currentModules.push(item);\r\n                    }\r\n                });\r\n            } else {\r\n                //获取喜欢的功能模块先并保存至本地\r\n                $.each(modules, function (index, item) {\r\n                    notPushAble = false;\r\n                    //遍历现已存在的模块\r\n                    $.each(_this.currentModules, function (index, module) {\r\n                        if (module.menuCode === item.menuCode) {\r\n                            //如果已经存在则不做PUSH操作\r\n                            notPushAble = true;\r\n                        }\r\n                    });\r\n\r\n                    if (!notPushAble) {\r\n                        _this.currentModules.push(item);\r\n                    }\r\n                });\r\n            }\r\n\r\n        },\r\n        //清空本地收藏缓存\r\n        clear: function () {\r\n            this.currentModules = undefined;\r\n        },\r\n        //重新加载页面中的收藏模块信息\r\n        reLoad: function () {\r\n            var _this = this;\r\n            this.currentModules = [];\r\n            if ($(\".popup-quickStart\").css(\"display\") == \"none\") {\r\n                //先存放目前页面显示中的收藏模块信息及顺序、\r\n                $.each($(\"#quickMenusRender\").children(\".quick-menu-item-box\"), function (index, item) {\r\n                    _this.currentModules.push({\r\n                        \"menuCode\": $(item).attr(\"favor-id\"),\r\n                        \"moduleCode\": $(item).attr(\"data-module-code\"),\r\n                        \"moduleGroupCode\": $(item).attr(\"data-module-group-code\"),\r\n                        \"moduleType\": $(item).attr(\"data-module-type\")\r\n                    });\r\n                });\r\n            } else {\r\n                //先存放目前页面显示中的收藏模块信息及顺序、\r\n                $.each($(\"#quickStartMenus\").children(\".quick-menu-item-box\"), function (index, item) {\r\n                    _this.currentModules.push({\r\n                        \"menuCode\": $(item).attr(\"favor-id\"),\r\n                        \"moduleCode\": $(item).attr(\"data-module-code\"),\r\n                        \"moduleGroupCode\": $(item).attr(\"data-module-group-code\"),\r\n                        \"moduleType\": $(item).attr(\"data-module-type\")\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        //获取收藏的模块信息集合\r\n        getCollectionModules: function () {\r\n            return this.currentModules;\r\n        }\r\n    },\r\n    // 快捷开始菜单\r\n    quickStart: {\r\n        floatMenu: function () {\r\n            indexCtrl.navMenu.floatMenu(\"#quickStartFavor\", window.quickSortFavor);\r\n        },\r\n        sortable: function () {\r\n            // 使用的组件API地址：https://github.com/RubaXa/Sortable/\r\n            if (document.getElementById(\"quickStartMenus\")) {\r\n                var el = document.getElementById(\"quickStartMenus\");\r\n                window.quickSortFavor = Sortable.create(el, {\r\n                    animation: 100,\r\n                    handle: \".favor-move\",\r\n                    disabled: true\r\n                });\r\n            }\r\n        }\r\n    },\r\n    // 菜单快捷键绑定\r\n    menuHotKeyEvent: function () {\r\n        //回车键触发上线确认操作\r\n        util.hotkeysBind(\"keydown\", \"return\", function () {\r\n            var menu = $(\".quick-menu-item-inner:eq(0)\", this.page);\r\n            if (menu && menu.length > 0) {\r\n                Sweet.mainView.router.load({\r\n                    url: menu.attr(\"data-url\")\r\n                });\r\n            }\r\n        });\r\n\r\n        // 数字键盘快捷键,直接进入对应功能。\r\n        $(document).keydown(function (event) {\r\n\r\n\r\n            if (Sweet.mainView.activePage.url === \"views/index.html\") {\r\n                var keyCode = event.keyCode;\r\n                var hotIndex;\r\n                var isNum = (keyCode >= 48 && keyCode <= 57);// 长键盘数字键\r\n                var isSmallNum = (keyCode >= 96 && keyCode <= 105);// 小键盘数字键\r\n\r\n                if (isNum || isSmallNum) {\r\n                    if (keyCode === 48 || keyCode === 96) {\r\n                        hotIndex = 10;\r\n                    } else if (keyCode > 48 && keyCode <= 57) {\r\n                        hotIndex = keyCode - 48;\r\n                    } else {\r\n                        hotIndex = keyCode - 96;\r\n                    }\r\n                    // 不是数字键，直接退出，此处不能return false; 使按键失效\r\n                } else {\r\n                    return;\r\n                }\r\n\r\n                var menus = $(\".quick-menu-item-inner\");\r\n                var menusLen = menus.length;\r\n                if (hotIndex > menusLen) {\r\n                    notie.alert({text: \"你所按快捷键序号超过菜单数！\"});\r\n                } else {\r\n                    $(document).off(\"keydown\");\r\n                    Sweet.mainView.router.load({\r\n                        url: \"views/\" + menus.eq(hotIndex - 1).attr(\"data-url\")\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    },\r\n    // 移除菜单快捷键\r\n    removeHotMenu: function () {\r\n        $(document).off(\"keydown\");\r\n    },\r\n    parseQueryString: function (url) {\r\n        var reg_url = /^[^\\?]+\\?([\\w\\W]+)$/,\r\n            reg_para = /([^&=]+)=([\\w\\W]*?)(&|$|#)/g,\r\n            arr_url = reg_url.exec(url),\r\n            ret = {};\r\n        if (arr_url && arr_url[1]) {\r\n            var str_para = arr_url[1],\r\n                result;\r\n            while ((result = reg_para.exec(str_para)) !== null) {\r\n                ret[result[1]] = result[2];\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n};\r\n\r\nmodule.exports = indexCtrl;\n\n\n// WEBPACK FOOTER //\n// ./src/js/pages/index.js"],"sourceRoot":""}