webpackJsonp([28],{632:function(t,e,n){"use strict";(function(e,i){var o=n(35),s=n(53),a=n(34),r={moduleConfig:void 0,pages:void 0,page:void 0,$page:void 0,init:function(){this.$page=e(this.page),a.setZoom(this.page),a.translate(this.$page),this.fullScreenEvent(),this.initData()},initData:function(){var t=this;o.getSysModuleConfig("PCS","MULTISTATION_ASSEMBLY_INSTRUCTION").done(function(e){a.proConfig(e,function(e){t.moduleConfig=e,e.leftStationAssemblyInstruction&&(t.getDataAndRenderScreenLeft(),t.subscribeNotifyLeft()),e.rightStationAssemblyInstruction&&(t.getDataAndRenderScreenRight(),t.subscribeNotifyRight())})})},subscribeNotifyLeft:function(){var t=this,e=t.moduleConfig.leftStationAssemblyInstruction,n="subassembly/"+o.getSiteCode()+"/"+e.onlineStationCode;s.subscribe(n,"multistationAssemblyInstruction"),s.registerMessageHandler(n,"multistationAssemblyInstruction.multiStationAssemblyInstructionLeft",function(){t.getDataAndRenderScreenLeft()})},subscribeNotifyRight:function(){var t=this,e=t.moduleConfig.rightStationAssemblyInstruction,n="subassembly/"+o.getSiteCode()+"/"+e.onlineStationCode;s.subscribe(n,"multistationAssemblyInstruction"),s.registerMessageHandler(n,"multistationAssemblyInstruction.multiStationAssemblyInstructionRight",function(){t.getDataAndRenderScreenRight()})},getDataAndRenderScreenLeft:function(){var t=this,e=t.moduleConfig.leftStationAssemblyInstruction;a.service("GMES-CLIENT-PCS0005",{onlineStationCode:e.onlineStationCode,assemblyStationCode:e.assemblyStationCode,rowNum:e.rowNum||0},"正在加载中").done(function(n){if("0"!==n.returnCode)return void i.alert({text:n.errorMessage});var o=n.data;if(!o)return void i.alert({text:"左工位无数据"});o=a.processData(t.moduleConfig.leftStationAssemblyInstruction,o);var s=e.thresholdValue||3;o.warnShineFlag=!1,o.remainingQuantity&&o.remainingQuantity<=s&&(o.warnShineFlag=!0),a.tplManager("multiStationAssInsTpl",o,"leftStationAssInsRender")})},getDataAndRenderScreenRight:function(){var t=this,e=t.moduleConfig.rightStationAssemblyInstruction;a.service("GMES-CLIENT-PCS0005",{onlineStationCode:e.onlineStationCode,assemblyStationCode:e.assemblyStationCode,rowNum:e.rowNum||0},null).done(function(n){if("0"!==n.returnCode)return void i.alert({text:n.errorMessage});var o=n.data;if(!o)return void i.alert({text:"右工位无数据"});o=a.processData(t.moduleConfig.rightStationAssemblyInstruction,o);var s=e.thresholdValue||3;o.warnShineFlag=!1,o.remainingQuantity&&o.remainingQuantity<=s&&(o.warnShineFlag=!0),a.tplManager("multiStationAssInsTpl",o,"rightStationAssInsRender")}).fail(function(){i.alert({text:"右工位未获取到数据"})})},fullScreenEvent:function(){a.launchIntoFullscreen(document.body)}};t.exports=r}).call(e,n(4),n(36))}});
//# sourceMappingURL=pcs_multistationAssemblyInstruction_e698222f77410b9c3a75.js.map